2025-06-11 04:30:49,510 - __main__ - ERROR - Environment check failed. Please fix the issues above.
2025-06-11 04:31:12,065 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 1
2025-06-11 04:31:12,065 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 2
2025-06-11 04:31:12,066 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 4
2025-06-11 04:31:12,066 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 6
2025-06-11 04:31:12,066 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 7
2025-06-11 04:31:12,067 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 8
2025-06-11 04:31:12,067 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 9
2025-06-11 04:31:12,071 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 04:31:12,518 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 1
2025-06-11 04:31:12,518 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 2
2025-06-11 04:31:12,518 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 4
2025-06-11 04:31:12,519 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 6
2025-06-11 04:31:12,519 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 7
2025-06-11 04:31:12,519 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 8
2025-06-11 04:31:12,519 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 9
2025-06-11 04:31:13,005 - __main__ - ERROR - Import error: No module named 'handlers.session_manager'
2025-06-11 04:33:23,348 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 1
2025-06-11 04:33:23,349 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 2
2025-06-11 04:33:23,349 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 4
2025-06-11 04:33:23,349 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 6
2025-06-11 04:33:23,350 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 7
2025-06-11 04:33:23,350 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 8
2025-06-11 04:33:23,350 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 9
2025-06-11 04:33:23,355 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 04:33:23,517 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 1
2025-06-11 04:33:23,517 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 2
2025-06-11 04:33:23,517 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 4
2025-06-11 04:33:23,518 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 6
2025-06-11 04:33:23,518 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 7
2025-06-11 04:33:23,518 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 8
2025-06-11 04:33:23,519 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 9
2025-06-11 04:33:23,951 - __main__ - ERROR - Import error: No module named 'handlers.ai_service'
2025-06-11 04:34:20,835 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 1
2025-06-11 04:34:20,836 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 2
2025-06-11 04:34:20,836 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 4
2025-06-11 04:34:20,836 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 6
2025-06-11 04:34:20,837 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 7
2025-06-11 04:34:20,837 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 8
2025-06-11 04:34:20,837 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 9
2025-06-11 04:34:20,842 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 04:34:21,005 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 1
2025-06-11 04:34:21,005 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 2
2025-06-11 04:34:21,006 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 4
2025-06-11 04:34:21,006 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 6
2025-06-11 04:34:21,006 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 7
2025-06-11 04:34:21,007 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 8
2025-06-11 04:34:21,007 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 9
2025-06-11 04:34:22,478 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 1
2025-06-11 04:34:22,479 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 2
2025-06-11 04:34:22,479 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 4
2025-06-11 04:34:22,479 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 6
2025-06-11 04:34:22,480 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 7
2025-06-11 04:34:22,480 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 8
2025-06-11 04:34:22,480 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 9
2025-06-11 04:34:22,485 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 04:35:46,284 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 1
2025-06-11 04:35:46,285 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 2
2025-06-11 04:35:46,285 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 4
2025-06-11 04:35:46,285 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 6
2025-06-11 04:35:46,286 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 7
2025-06-11 04:35:46,286 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 8
2025-06-11 04:35:46,286 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 9
2025-06-11 04:35:46,290 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 04:35:46,472 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 1
2025-06-11 04:35:46,472 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 2
2025-06-11 04:35:46,472 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 4
2025-06-11 04:35:46,473 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 6
2025-06-11 04:35:46,473 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 7
2025-06-11 04:35:46,473 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 8
2025-06-11 04:35:46,474 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 9
2025-06-11 04:35:47,412 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 1
2025-06-11 04:35:47,412 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 2
2025-06-11 04:35:47,412 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 4
2025-06-11 04:35:47,413 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 6
2025-06-11 04:35:47,413 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 7
2025-06-11 04:35:47,413 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 8
2025-06-11 04:35:47,414 - dotenv.main - WARNING - python-dotenv could not parse statement starting at line 9
2025-06-11 04:35:47,417 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 04:38:33,673 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 04:38:35,577 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 04:39:30,877 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 04:39:31,896 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 04:40:52,460 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 04:40:53,501 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 04:42:29,997 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 04:42:31,029 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 04:44:22,495 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 04:44:23,517 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 04:46:36,344 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 04:46:37,373 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 04:47:58,676 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 04:47:59,730 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 04:52:34,150 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 04:52:35,211 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 04:55:55,378 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 04:55:56,447 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:02:14,461 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:02:15,569 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:05:50,225 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:05:51,461 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:07:04,480 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:07:05,547 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:11:15,643 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:11:17,190 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:13:45,055 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:13:46,527 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:17:36,938 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:17:38,925 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:22:02,866 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:22:04,132 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:24:18,068 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:24:19,243 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:30:01,541 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:30:02,627 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:32:00,807 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:32:01,908 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:33:59,572 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:34:01,342 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:41:20,905 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:41:23,001 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:43:29,099 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:43:30,807 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:46:38,034 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:46:39,761 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:52:41,651 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:52:43,370 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 05:57:53,408 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 05:57:54,898 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 06:00:43,697 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:00:44,418 - __main__ - ERROR - Unexpected error: name 'Dict' is not defined
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\Lola\app\handlers\webhook_handler.py", line 8, in <module>
    from handlers.message_processor import MessageProcessor
  File "C:\Users\zigam\Documents\Lola\Lola\app\handlers\message_processor.py", line 10, in <module>
    from handlers.location_address_handler import LocationAddressHandler
  File "C:\Users\zigam\Documents\Lola\Lola\app\handlers\location_address_handler.py", line 7, in <module>
    class LocationAddressHandler:
    ...<589 lines>...
            return {"redirect": "order_handler", "redirect_message": "show_order_confirmation_from_location"}
  File "C:\Users\zigam\Documents\Lola\Lola\app\handlers\location_address_handler.py", line 22, in LocationAddressHandler
    def initiate_address_collection(self, session_id: str) -> Dict: # Removed state parameter
                                                              ^^^^
NameError: name 'Dict' is not defined. Did you mean: 'dict'?
2025-06-11 06:02:50,651 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:02:51,517 - __main__ - ERROR - Unexpected error: name 'Dict' is not defined
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\Lola\app\handlers\webhook_handler.py", line 8, in <module>
    from handlers.message_processor import MessageProcessor
  File "C:\Users\zigam\Documents\Lola\Lola\app\handlers\message_processor.py", line 10, in <module>
    from handlers.location_address_handler import LocationAddressHandler
  File "C:\Users\zigam\Documents\Lola\Lola\app\handlers\location_address_handler.py", line 7, in <module>
    class LocationAddressHandler:
    ...<589 lines>...
            return {"redirect": "order_handler", "redirect_message": "show_order_confirmation_from_location"}
  File "C:\Users\zigam\Documents\Lola\Lola\app\handlers\location_address_handler.py", line 22, in LocationAddressHandler
    def initiate_address_collection(self, session_id: str) -> Dict: # Removed state parameter
                                                              ^^^^
NameError: name 'Dict' is not defined. Did you mean: 'dict'?
2025-06-11 06:05:03,019 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:05:04,157 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 06:06:25,510 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:06:26,571 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 06:07:38,446 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:07:39,498 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 06:08:46,196 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:08:46,788 - __main__ - ERROR - Unexpected error: '(' was never closed (message_processor.py, line 264)
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\Lola\app\handlers\webhook_handler.py", line 8, in <module>
    from handlers.message_processor import MessageProcessor
  File "C:\Users\zigam\Documents\Lola\Lola\app\handlers\message_processor.py", line 264
    return self.location_handler.handle_manual_address_entry(state, original_message, session_id
                                                            ^
SyntaxError: '(' was never closed
2025-06-11 06:09:38,616 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:09:39,768 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 06:10:29,577 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:10:29,740 - __main__ - ERROR - Import error: No module named 'services.session_manager'
2025-06-11 06:12:31,846 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:12:32,021 - __main__ - ERROR - Import error: No module named 'services.session_manager'
2025-06-11 06:12:55,094 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:12:55,257 - __main__ - ERROR - Import error: No module named 'services.session_manager'
2025-06-11 06:16:13,464 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:16:13,640 - __main__ - ERROR - Import error: No module named 'services.session_manager'
2025-06-11 06:17:54,804 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:17:54,962 - __main__ - ERROR - Import error: No module named 'services.session_manager'
2025-06-11 06:18:52,646 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:18:52,908 - __main__ - ERROR - Import error: No module named 'services.session_manager'
2025-06-11 06:19:21,066 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:19:21,324 - __main__ - ERROR - Import error: No module named 'services.session_manager'
2025-06-11 06:19:33,365 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 06:19:33,603 - __main__ - ERROR - Import error: No module named 'services.session_manager'
2025-06-11 06:20:59,143 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:25:56,483 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:25:56,850 - __main__ - ERROR - Import error: No module named 'services.session_manager'
2025-06-11 11:29:47,942 - __main__ - ERROR - Environment check failed. Please fix the issues above.
2025-06-11 11:31:17,876 - __main__ - ERROR - Environment check failed. Please fix the issues above.
2025-06-11 11:31:25,834 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:31:26,144 - __main__ - ERROR - Import error: No module named 'services.session_manager'
2025-06-11 11:31:43,053 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:31:43,807 - __main__ - ERROR - Unexpected error: invalid syntax (location_service.py, line 1)
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\Lola\app\handlers\webhook_handler.py", line 7, in <module>
    from services.location_service import LocationService
  File "C:\Users\zigam\Documents\Lola\Lola\app\services\location_service.py", line 1
    mport requests
          ^^^^^^^^
SyntaxError: invalid syntax
2025-06-11 11:34:02,380 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:34:04,402 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 11:35:04,891 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:35:06,395 - __main__ - ERROR - Import error: No module named 'services.llm_service'
2025-06-11 11:36:29,183 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:36:31,179 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 11:37:48,653 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:37:49,423 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 11:38:46,414 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:38:47,528 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 11:40:17,515 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:40:18,473 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 11:40:35,754 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:40:36,614 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 11:41:48,898 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:41:49,706 - __main__ - ERROR - Import error: No module named 'services.config_service'
2025-06-11 11:44:12,886 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:44:13,721 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 11:48:22,136 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:48:22,562 - __main__ - ERROR - Import error: cannot import name 'WebhookHandler' from partially initialized module 'handlers.webhook_handler' (most likely due to a circular import) (C:\Users\zigam\Documents\Lola\Lola\app\handlers\webhook_handler.py)
2025-06-11 11:50:14,097 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:50:15,065 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 11:51:04,396 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:51:05,470 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 11:53:27,495 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:53:28,308 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 11:54:52,337 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:54:53,285 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 11:59:52,963 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 11:59:52,965 - __main__ - ERROR - Import error: No module named 'app'
2025-06-11 12:00:01,212 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 12:00:01,214 - __main__ - ERROR - Import error: No module named 'app'
2025-06-11 12:00:10,088 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 12:00:10,090 - __main__ - ERROR - Import error: No module named 'app'
2025-06-11 12:01:18,859 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 12:01:18,860 - __main__ - ERROR - Import error: No module named 'app'
2025-06-11 12:07:59,314 - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 12:08:00,354 - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 12:08:47,197 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 12:09:36,623 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 12:09:38,055 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 12:12:44,754 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 12:16:40,568 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 12:17:22,188 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 12:17:23,121 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 12:17:42,257 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 12:17:43,032 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 12:43:47,765 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 12:43:49,233 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 12:54:51,166 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 12:54:52,679 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 12:58:14,165 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 12:58:15,213 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 13:04:50,177 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 13:04:51,407 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 13:16:49,157 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 13:16:50,309 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 13:25:52,539 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 13:25:53,911 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 13:39:34,972 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 13:39:36,053 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 14:09:14,706 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 14:09:17,151 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 14:11:51,631 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 14:11:52,681 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 14:13:22,195 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 14:13:23,379 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 14:23:45,145 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 14:23:46,167 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 14:25:21,801 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 14:25:22,814 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 14:29:54,000 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 14:29:55,706 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 14:50:53,384 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 14:50:53,939 - __main__ - ERROR - Unexpected error: name 'Dict' is not defined
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\webhook_handler.py", line 8, in <module>
    from handlers.message_processor import MessageProcessor
  File "C:\Users\zigam\Documents\Lola\app\handlers\message_processor.py", line 9, in <module>
    from handlers.payment_handler import PaymentHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\payment_handler.py", line 7, in <module>
    class PaymentHandler(BaseHandler):
    ...<695 lines>...
                self.logger.error(f"Error initiating webhook feedback collection for order {order_id}: {e}")
  File "C:\Users\zigam\Documents\Lola\app\handlers\payment_handler.py", line 683, in PaymentHandler
    def _initiate_feedback_collection(self, state: Dict, session_id: str, order_id: str) -> None:
                                                   ^^^^
NameError: name 'Dict' is not defined. Did you mean: 'dict'?
2025-06-11 14:52:26,009 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 14:52:27,268 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 14:59:38,920 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 14:59:39,955 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 15:15:23,708 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 15:15:25,191 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 15:22:37,940 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 15:22:39,149 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 15:55:17,054 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 15:55:18,181 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 16:17:39,375 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 16:17:40,984 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 16:24:32,594 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 16:24:33,639 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 19:38:35,881 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 19:38:38,605 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-11 22:44:34,551 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-11 22:44:36,124 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 15:19:09,739 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 15:19:14,570 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 17:45:56,488 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 17:45:58,348 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 17:48:24,381 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 17:48:25,501 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 17:50:30,260 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 17:50:31,775 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 17:56:11,904 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 17:56:13,004 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 17:57:50,730 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 17:57:51,825 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 18:00:41,921 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:00:43,040 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 18:05:53,461 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:05:54,040 - __main__ - ERROR - Unexpected error: unindent does not match any outer indentation level (order_handler.py, line 47)
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\webhook_handler.py", line 8, in <module>
    from handlers.message_processor import MessageProcessor
  File "C:\Users\zigam\Documents\Lola\app\handlers\message_processor.py", line 8, in <module>
    from handlers.order_handler import OrderHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\order_handler.py", line 47
    def handle_get_new_name_address_state(self, state: Dict, message: str, session_id: str) -> Dict:
                                                                                                    ^
IndentationError: unindent does not match any outer indentation level
2025-06-12 18:08:25,908 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:08:27,351 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 18:12:31,301 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:12:31,963 - __main__ - ERROR - Unexpected error: invalid syntax (message_processor.py, line 1)
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\webhook_handler.py", line 8, in <module>
    from handlers.message_processor import MessageProcessor
  File "C:\Users\zigam\Documents\Lola\app\handlers\message_processor.py", line 1
    elif current_state == "confirm_details" or current_state == "confirm_and_pay":
    ^^^^
SyntaxError: invalid syntax
2025-06-12 18:14:21,637 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:14:23,076 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 18:15:42,925 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:15:43,966 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 18:18:13,050 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:18:13,675 - __main__ - ERROR - Unexpected error: expected 'except' or 'finally' block (order_handler.py, line 457)
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\webhook_handler.py", line 8, in <module>
    from handlers.message_processor import MessageProcessor
  File "C:\Users\zigam\Documents\Lola\app\handlers\message_processor.py", line 8, in <module>
    from handlers.order_handler import OrderHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\order_handler.py", line 457
    def handle_get_new_name_address_state(self, state: Dict, message: str, session_id: str) -> Dict:
SyntaxError: expected 'except' or 'finally' block
2025-06-12 18:20:12,899 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:20:13,620 - __main__ - ERROR - Unexpected error: expected 'except' or 'finally' block (order_handler.py, line 457)
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\webhook_handler.py", line 8, in <module>
    from handlers.message_processor import MessageProcessor
  File "C:\Users\zigam\Documents\Lola\app\handlers\message_processor.py", line 8, in <module>
    from handlers.order_handler import OrderHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\order_handler.py", line 457
    def handle_get_new_name_address_state(self, state: Dict, message: str, session_id: str) -> Dict:
SyntaxError: expected 'except' or 'finally' block
2025-06-12 18:22:04,860 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:22:06,249 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 18:25:10,257 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:25:11,553 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 18:27:25,859 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:27:26,645 - __main__ - ERROR - Unexpected error: unterminated string literal (detected at line 231) (order_handler.py, line 231)
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\webhook_handler.py", line 8, in <module>
    from handlers.message_processor import MessageProcessor
  File "C:\Users\zigam\Documents\Lola\app\handlers\message_processor.py", line 8, in <module>
    from handlers.order_handler import OrderHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\order_handler.py", line 231
    )total_price": total_price,
                ^
SyntaxError: unterminated string literal (detected at line 231)
2025-06-12 18:28:08,472 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:28:09,537 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 18:31:23,829 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:31:24,891 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 18:40:51,822 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:40:52,007 - __main__ - ERROR - Unexpected error: invalid syntax (data_manager.py, line 63)
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\webhook_handler.py", line 4, in <module>
    from utils.data_manager import DataManager
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 63
    user_details_list.append({"phone_number": phone, *details})
                                                     ^
SyntaxError: invalid syntax
2025-06-12 18:41:55,215 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:41:55,381 - __main__ - ERROR - Unexpected error: invalid syntax (data_manager.py, line 63)
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\webhook_handler.py", line 4, in <module>
    from utils.data_manager import DataManager
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 63
    user_details_list.append({"phone_number": phone, *details})
                                                     ^
SyntaxError: invalid syntax
2025-06-12 18:42:04,936 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:42:05,188 - __main__ - ERROR - Unexpected error: invalid syntax (data_manager.py, line 63)
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\webhook_handler.py", line 4, in <module>
    from utils.data_manager import DataManager
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 63
    user_details_list.append({"phone_number": phone, *details})
                                                     ^
SyntaxError: invalid syntax
2025-06-12 18:42:11,853 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:42:12,017 - __main__ - ERROR - Unexpected error: invalid syntax (data_manager.py, line 63)
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\webhook_handler.py", line 4, in <module>
    from utils.data_manager import DataManager
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 63
    user_details_list.append({"phone_number": phone, *details})
                                                     ^
SyntaxError: invalid syntax
2025-06-12 18:47:45,514 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:47:46,090 - __main__ - ERROR - Unexpected error: invalid syntax (payment_service.py, line 72)
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\webhook_handler.py", line 6, in <module>
    from services.payment_service import PaymentService
  File "C:\Users\zigam\Documents\Lola\app\services\payment_service.py", line 72
    *(metadata or {})
    ^
SyntaxError: invalid syntax
2025-06-12 18:48:20,823 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:48:22,098 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 18:48:41,658 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:48:42,695 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 18:55:04,625 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:55:05,775 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 18:58:48,119 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 18:58:49,160 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:01:12,555 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:01:13,712 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:04:28,054 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:04:29,169 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:05:08,668 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:05:10,125 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:10:05,085 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:10:06,119 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:12:26,779 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:12:27,892 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:17:11,276 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:17:12,347 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:19:41,323 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:19:42,510 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:21:10,055 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:21:11,140 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:22:46,347 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:22:47,409 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:25:28,698 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:25:29,853 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:29:59,413 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:30:00,541 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:31:35,564 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:31:36,598 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:35:15,163 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:35:15,716 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:38:34,837 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:38:35,951 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:42:36,244 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:42:37,299 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-12 19:43:53,327 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-12 19:43:54,335 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 10:44:11,587 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 10:44:14,082 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 13:14:17,944 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 13:14:19,434 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 13:16:17,228 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 13:16:18,303 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 13:18:24,990 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 13:18:26,078 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 13:24:31,799 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 13:24:32,842 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 13:28:46,380 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 13:28:47,669 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 13:35:21,971 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 13:35:23,224 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 13:43:00,759 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 13:43:01,842 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 13:48:47,208 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 13:48:48,309 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 13:51:21,913 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 13:51:22,991 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 13:53:01,572 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 13:53:02,656 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 14:05:36,195 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 14:05:37,275 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 14:32:29,698 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 14:32:30,964 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 14:33:33,637 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 14:33:34,717 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 14:39:03,993 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 14:39:05,255 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 14:41:00,392 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 14:41:01,565 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 14:43:06,997 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 14:43:07,603 - __main__ - ERROR - Import error: cannot import name 'AIHandler' from partially initialized module 'handlers.ai_handler' (most likely due to a circular import) (C:\Users\zigam\Documents\Lola\app\handlers\ai_handler.py)
2025-06-19 14:45:36,300 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 14:45:37,486 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 14:47:39,751 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 14:47:40,887 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 14:48:17,087 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 14:48:18,308 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 15:06:03,879 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 15:06:05,562 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 15:09:15,400 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 15:09:16,540 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 15:10:35,389 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 15:10:36,460 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 15:15:13,750 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 15:15:15,433 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 15:17:13,312 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 15:17:14,536 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 15:22:49,796 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 15:22:51,268 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 15:24:05,008 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 15:24:06,161 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 15:28:10,361 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 15:28:11,526 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 15:36:06,805 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 15:36:08,446 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 15:46:21,015 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 15:46:22,161 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 16:17:12,971 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 16:17:15,721 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 16:21:28,462 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 16:21:30,790 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 16:22:35,261 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 16:22:37,524 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 16:24:00,487 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 16:24:02,555 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 16:25:03,051 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 16:25:05,571 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 16:32:43,365 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 16:32:45,524 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 17:04:16,920 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 17:04:19,146 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 17:24:40,840 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 17:24:42,265 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 17:26:37,614 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 17:26:39,182 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 17:31:37,207 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 17:31:38,706 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 17:34:37,174 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 17:34:38,426 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 17:38:35,403 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 17:38:36,532 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-06-19 17:39:21,907 - __main__ - INFO - Starting WhatsApp bot server...
2025-06-19 17:39:22,994 - root - INFO - Ensured data directory 'data' and logs directory 'logs' exist.
2025-07-03 18:13:20,960 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 18:13:22,948 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 18:13:22,948 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 18:13:22,949 - services.payment_service - INFO - PaymentService initialized
2025-07-03 18:13:22,949 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 18:13:22,949 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 18:13:22,950 - services.payment_service - INFO - PaymentService initialized
2025-07-03 18:13:22,950 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 18:13:22,950 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 18:13:22,951 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 18:13:22,951 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 18:13:22,951 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 18:13:22,952 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 18:13:23,454 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 18:13:23,454 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 18:13:23,455 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 18:13:23,455 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 18:13:23,486 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 18:13:23,487 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 18:51:27,765 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 18:51:27] "POST /webhook HTTP/1.1" 200 -
2025-07-03 19:07:07,443 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 19:07:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 19:07:45,540 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 19:07:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 19:08:05,778 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 19:08:05] "POST /webhook HTTP/1.1" 200 -
2025-07-03 19:16:19,136 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 19:16:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 19:17:07,639 - handlers.webhook_handler - WARNING - No valid message data extracted for 2348037674322. Message type: sticker
2025-07-03 19:17:07,640 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 19:17:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 19:24:59,763 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 19:24:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 19:40:20,383 - handlers.webhook_handler - INFO - Processing message from 254722356495 (User: Fiona Yiyah Nakitare): {'type': 'text', 'text': 'Please respond'}
2025-07-03 19:40:20,386 - utils.session_manager - INFO - New session 254722356495 initialized.
2025-07-03 19:40:20,411 - services.lead_tracker - INFO - New lead tracked: 254722356495 (Fiona Yiyah Nakitare)
2025-07-03 19:40:20,478 - handlers.base_handler - INFO - Session 254722356495 identified as guest, prompting for name and address.
2025-07-03 19:40:21,767 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"254722356495","wa_id":"254722356495"}],"messages":[{"id":"wamid.HBgMMjU0NzIyMzU2NDk1FQIAERgSNzZDOUQxQ0REQjUyMjFFOEJGAA=="}]}
2025-07-03 19:40:21,769 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '254722356495', 'wa_id': '254722356495'}], 'messages': [{'id': 'wamid.HBgMMjU0NzIyMzU2NDk1FQIAERgSNzZDOUQxQ0REQjUyMjFFOEJGAA=='}]}
2025-07-03 19:40:21,770 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 19:40:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 19:40:23,283 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 19:40:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:14:20,980 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 21:14:22,798 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 21:14:22,800 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 21:14:22,800 - services.payment_service - INFO - PaymentService initialized
2025-07-03 21:14:22,800 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 21:14:22,801 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 21:14:22,801 - services.payment_service - INFO - PaymentService initialized
2025-07-03 21:14:22,802 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 21:14:22,802 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 21:14:22,803 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 21:14:22,803 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 21:14:22,803 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 21:14:22,804 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 21:14:23,357 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 21:14:23,358 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 21:14:23,358 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 21:14:23,359 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 21:14:23,388 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 21:14:23,388 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 21:14:39,065 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Hello'}
2025-07-03 21:14:39,066 - utils.session_manager - INFO - New session 2348055614455 initialized.
2025-07-03 21:14:39,071 - handlers.base_handler - INFO - Session 2348055614455 recognized user 'Ziga'.
2025-07-03 21:14:42,693 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkI3RkE0OEZCNkQzNTZENDhBOAA="}]}
2025-07-03 21:14:42,694 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkI3RkE0OEZCNkQzNTZENDhBOAA='}]}
2025-07-03 21:14:42,695 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:14:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:14:45,545 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:14:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:14:46,468 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:14:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:45:45,298 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:45:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:45:47,988 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:45:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:45:53,730 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:45:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:47:39,137 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:47:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:47:41,523 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:47:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:47:45,489 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:47:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:40,829 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:40] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:43,650 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:43] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:43,971 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:43] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:44,009 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:45,049 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:45,409 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:46,504 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:46,658 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:48,876 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:48] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:49,025 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:49,163 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:52,665 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:52] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:52,825 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:52] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:53,845 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:54,297 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:55,582 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:55] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:56,384 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:56] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:57,260 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:57,722 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:58,065 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:58] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:58,369 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:58] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:59,741 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:48:59,898 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:48:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:01,759 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:01] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:03,130 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:03] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:04,429 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:04] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:04,571 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:04] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:04,933 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:04] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:06,496 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:06] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:06,987 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:06] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:08,273 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:08,704 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:10,754 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:10] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:12,900 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:12] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:13,946 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:13] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:14,569 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:15,445 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:15,603 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:16,628 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:16] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:18,429 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:18,995 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:20,327 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:20] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:23,243 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:23,690 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:24,168 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:24] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:24,404 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:24] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:24,504 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:24] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:25,649 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:25] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:25,724 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:25] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:28,067 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:29,113 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:30,431 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:30] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:31,937 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:31] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:33,112 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:33,251 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:33,448 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:34,412 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:35,019 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:35,327 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:37,600 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:37] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:38,615 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:40,061 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:40] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:40,948 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:40] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:43,671 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:43] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:44,300 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:44,557 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:44,703 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:46,479 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:46,831 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:47,290 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:47,458 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:50,372 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:50] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:50,713 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:50] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:51,531 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:51] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:53,346 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:53,483 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:53,661 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:53,681 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:55,281 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:55] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:55,436 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:55] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:56,116 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:56] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:56,870 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:56] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:57,744 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:49:59,338 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:49:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:00,326 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:00,758 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:01,631 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:01] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:03,446 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:03] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:05,001 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:05] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:05,309 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:05] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:05,847 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:05] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:06,661 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:06] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:07,025 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:09,382 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:09] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:10,710 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:10] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:12,330 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:12] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:12,790 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:12] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:12,869 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:12] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:14,594 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:15,378 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:15,715 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:15,849 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:15,994 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:16,147 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:16] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:16,910 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:16] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:18,665 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:18,930 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:19,607 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:21,002 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:22,457 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:23,695 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:24,403 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:24] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:24,404 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:24] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:24,486 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:24] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:25,766 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:25] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:27,109 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:27] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:27,723 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:27] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:29,011 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:29,573 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:32,252 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:32,636 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:32,797 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:33,021 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:34,015 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:34,081 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:35,389 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:35,560 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:38,529 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:38,572 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:38,887 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:39,683 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:41,632 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:41,838 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:44,878 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:46,828 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:46,942 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:47,364 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:47,539 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:52,838 - handlers.webhook_handler - INFO - Processing message from 2348039582985 (User: George Agu): {'type': 'text', 'text': 'I warned you here that I am not George Osuagwu. My name is George Agu'}
2025-07-03 21:50:52,840 - utils.session_manager - INFO - New session 2348039582985 initialized.
2025-07-03 21:50:52,859 - services.lead_tracker - INFO - New lead tracked: 2348039582985 (George Agu)
2025-07-03 21:50:52,880 - handlers.base_handler - INFO - Session 2348039582985 identified as guest, prompting for name and address.
2025-07-03 21:50:54,561 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348039582985","wa_id":"2348039582985"}],"messages":[{"id":"wamid.HBgNMjM0ODAzOTU4Mjk4NRUCABEYEjFDMDVFOUE1QjE1QUNDMjYzMQA="}]}
2025-07-03 21:50:54,562 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348039582985', 'wa_id': '2348039582985'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAzOTU4Mjk4NRUCABEYEjFDMDVFOUE1QjE1QUNDMjYzMQA='}]}
2025-07-03 21:50:54,562 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:57,144 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:50:58,053 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:50:58] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:00,476 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:06,830 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:06] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:06,972 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:06] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:07,105 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:09,231 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:09] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:10,315 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:10] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:11,772 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:11] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:13,127 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:13] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:13,617 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:13] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:14,199 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:14,440 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:15,244 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:17,029 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:17] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:17,397 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:17] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:18,962 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:19,098 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:19,262 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:21,328 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:22,667 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:23,212 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:23,865 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:25,796 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:25] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:25,831 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:25] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:26,745 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:26] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:26,980 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:26] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:29,145 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:29,393 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:29,895 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:29,896 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:31,202 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:31] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:31,366 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:31] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:33,797 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:34,328 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:35,554 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:36,141 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:36,170 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:36,605 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:37,512 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:37] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:40,036 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:40] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:41,892 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:42,037 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:42,038 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:42,636 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:43,408 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:43] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:43,448 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:43] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:44,522 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:45,467 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:45,886 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:47,705 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:48,501 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:48] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:48,740 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:48] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:49,363 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:50,988 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:50] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:50,996 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:50] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:52,882 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:52] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:53,883 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:53,887 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:53,890 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:54,264 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:54,824 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:55,802 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:55] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:57,648 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:58,029 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:58] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:51:59,244 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:51:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:00,920 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:01,947 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:01] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:02,062 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:02] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:02,611 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:02] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:02,908 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:02] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:04,670 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:04] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:06,398 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:06] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:07,346 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:07,348 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:07,350 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:07,661 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:08,863 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:10,752 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:10] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:12,760 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:12] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:13,072 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:13] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:14,033 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:14,193 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:15,227 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:15,873 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:16,074 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:16] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:16,197 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:16] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:17,929 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:17] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:18,789 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:19,039 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:20,314 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:20] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:20,580 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:20] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:22,168 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:23,001 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:23,479 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:23,702 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:23,921 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:24,656 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:24] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:24,889 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:24] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:27,959 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:27] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:28,427 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:30,095 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:30] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:30,369 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:30] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:32,438 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:32,871 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:33,572 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:33,573 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:33,717 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:36,390 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:36,765 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:36,830 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:37,634 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:37] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:38,818 - handlers.webhook_handler - INFO - Processing message from 2347082706829 (User: Olusegun Adeniyi): {'type': 'text', 'text': 'Thank you. Acknowledged'}
2025-07-03 21:52:38,819 - utils.session_manager - INFO - New session 2347082706829 initialized.
2025-07-03 21:52:38,826 - services.lead_tracker - INFO - New lead tracked: 2347082706829 (Olusegun Adeniyi)
2025-07-03 21:52:38,838 - handlers.base_handler - INFO - Session 2347082706829 identified as guest, prompting for name and address.
2025-07-03 21:52:39,477 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:39,971 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2347082706829","wa_id":"2347082706829"}],"messages":[{"id":"wamid.HBgNMjM0NzA4MjcwNjgyORUCABEYEkEwRUZBMjg1MjkzRTBCMzQ1RgA="}]}
2025-07-03 21:52:39,972 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2347082706829', 'wa_id': '2347082706829'}], 'messages': [{'id': 'wamid.HBgNMjM0NzA4MjcwNjgyORUCABEYEkEwRUZBMjg1MjkzRTBCMzQ1RgA='}]}
2025-07-03 21:52:39,973 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:41,421 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:42,220 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:43,943 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:43] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:44,053 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:44,142 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:44,144 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:44,313 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:46,513 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:47,797 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:47,948 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:48,335 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:48] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:49,142 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:49,791 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:51,701 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:51] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:53,034 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:53,215 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:54,348 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:54,508 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:54,824 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:58,234 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:58] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:58,456 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:58] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:58,681 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:58] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:52:59,098 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:52:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:01,430 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:01] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:01,854 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:01] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:01,896 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:01] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:03,223 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:03] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:04,833 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:04] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:07,358 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:07,862 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:07,985 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:10,022 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:10] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:11,623 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:11] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:14,516 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:14,657 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:14,659 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:14,923 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:17,250 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:17] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:17,827 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:17] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:19,604 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:20,593 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:20] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:21,086 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:23,460 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:23,515 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:24,224 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:24] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:24,609 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:24] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:27,559 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:27] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:27,853 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:27] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:28,878 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:30,842 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:30] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:31,124 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:31] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:31,134 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:31] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:32,438 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:32,526 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:32,820 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:33,712 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:36,380 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:36,634 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:37,209 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:37] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:37,879 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:37] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:38,900 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:40,634 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:40] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:42,735 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:44,183 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:50,661 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:50] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:53,667 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:56,097 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:56] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:57,317 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:53:59,646 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:53:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:16,241 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:16] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:20,027 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:20] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:21,581 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:21,583 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:23,121 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:23,157 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:23,561 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:25,274 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:25] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:27,077 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:27] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:28,104 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:29,473 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:31,049 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:31] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:31,419 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:31] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:32,150 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:32,906 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:34,479 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:35,479 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:36,502 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:36,505 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:38,271 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:38,588 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:41,464 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:42,530 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:42,784 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:43,755 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:43] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:45,569 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:46,417 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:46,659 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:46,911 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:47,155 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:48,818 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:48] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:49,411 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:49,940 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:50,516 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:50] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:54,516 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:54,675 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:54,797 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:57,157 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:59,275 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:54:59,994 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:54:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:01,014 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:01] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:01,343 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:01] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:02,494 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:02] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:02,727 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:02] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:03,462 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:03] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:05,079 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:05] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:05,736 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:05] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:06,175 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:06] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:08,633 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:08,749 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:10,262 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:10] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:10,587 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:10] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:11,332 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:11] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:12,569 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:12] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:14,053 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:14,446 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:14,448 - handlers.webhook_handler - INFO - Processing message from 2348034111884 (User: Adewunmi Belo): {'type': 'text', 'text': 'Hello'}
2025-07-03 21:55:14,448 - utils.session_manager - INFO - New session 2348034111884 initialized.
2025-07-03 21:55:14,450 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:14,453 - services.lead_tracker - INFO - New lead tracked: 2348034111884 (Adewunmi Belo)
2025-07-03 21:55:14,462 - handlers.base_handler - INFO - Session 2348034111884 identified as guest, prompting for name and address.
2025-07-03 21:55:14,757 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:15,427 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:15,530 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348034111884","wa_id":"2348034111884"}],"messages":[{"id":"wamid.HBgNMjM0ODAzNDExMTg4NBUCABEYEkQ0RjY1MTg2OTgyQjVGNzY2MgA="}]}
2025-07-03 21:55:15,531 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348034111884', 'wa_id': '2348034111884'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAzNDExMTg4NBUCABEYEkQ0RjY1MTg2OTgyQjVGNzY2MgA='}]}
2025-07-03 21:55:15,531 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:18,030 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:18,036 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:18,905 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:19,074 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:20,949 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:20] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:21,449 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:22,993 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:23,672 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:24,860 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:24] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:25,033 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:25] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:25,136 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:25] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:25,314 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:25] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:26,629 - handlers.webhook_handler - INFO - Processing message from 2348034111884 (User: Adewunmi Belo): {'type': 'text', 'text': 'Sure i will be attending'}
2025-07-03 21:55:26,634 - handlers.message_processor - WARNING - No specific handler or state match for handler 'greeting_handler', state 'guest_info_prompt', message 'sure i will be attending' for session 2348034111884. Resetting to greeting.
2025-07-03 21:55:26,634 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348034111884', 'type': 'text', 'text': {'body': "I'm sorry, I didn't quite understand that. Let's get back to the main menu."}}
2025-07-03 21:55:26,717 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:26] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:26,830 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:26] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:27,349 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348034111884","wa_id":"2348034111884"}],"messages":[{"id":"wamid.HBgNMjM0ODAzNDExMTg4NBUCABEYEkU5RUM0NjY5NTgwRjM0NUM0MQA="}]}
2025-07-03 21:55:28,049 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:28,066 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348034111884","wa_id":"2348034111884"}],"messages":[{"id":"wamid.HBgNMjM0ODAzNDExMTg4NBUCABEYEjM0NEJFOTc2QjE2Q0YzM0I0MgA="}]}
2025-07-03 21:55:28,067 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348034111884', 'wa_id': '2348034111884'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAzNDExMTg4NBUCABEYEjM0NEJFOTc2QjE2Q0YzM0I0MgA='}]}
2025-07-03 21:55:28,067 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:28,682 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:29,027 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:29,825 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:31,308 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:31] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:32,757 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:33,658 - handlers.webhook_handler - INFO - Processing message from 2347053673669 (User: Yems): {'type': 'text', 'text': 'I already responded that I will be attending'}
2025-07-03 21:55:33,658 - utils.session_manager - INFO - New session 2347053673669 initialized.
2025-07-03 21:55:33,661 - services.lead_tracker - INFO - New lead tracked: 2347053673669 (Yems)
2025-07-03 21:55:33,674 - handlers.base_handler - INFO - Session 2347053673669 identified as guest, prompting for name and address.
2025-07-03 21:55:34,181 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:34,650 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2347053673669","wa_id":"2347053673669"}],"messages":[{"id":"wamid.HBgNMjM0NzA1MzY3MzY2ORUCABEYEjg5RTI2Qjk2REFCMEIwNjlEMwA="}]}
2025-07-03 21:55:34,651 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2347053673669', 'wa_id': '2347053673669'}], 'messages': [{'id': 'wamid.HBgNMjM0NzA1MzY3MzY2ORUCABEYEjg5RTI2Qjk2REFCMEIwNjlEMwA='}]}
2025-07-03 21:55:34,651 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:35,022 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:35,702 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:37,554 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:37] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:37,636 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:37] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:38,449 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:40,119 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:40] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:40,641 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:40] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:41,755 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:42,187 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:43,680 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:43] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:43,853 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:43] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:45,033 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:45,129 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:45,734 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:46,956 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:48,439 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:48] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:49,046 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:49,382 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:50,827 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:50] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:53,678 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:54,051 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:54,402 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:54,901 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:56,294 - handlers.webhook_handler - INFO - Processing message from 2348035201120 (User: Kayode oladipupo): {'type': 'text', 'text': 'I did already check your record'}
2025-07-03 21:55:56,295 - utils.session_manager - INFO - New session 2348035201120 initialized.
2025-07-03 21:55:56,301 - services.lead_tracker - INFO - New lead tracked: 2348035201120 (Kayode oladipupo)
2025-07-03 21:55:56,320 - handlers.base_handler - INFO - Session 2348035201120 identified as guest, prompting for name and address.
2025-07-03 21:55:56,353 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:56] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:57,193 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:57,231 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348035201120","wa_id":"2348035201120"}],"messages":[{"id":"wamid.HBgNMjM0ODAzNTIwMTEyMBUCABEYEjY4RTBBMTAwRDVFREUyQTNFMAA="}]}
2025-07-03 21:55:57,233 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348035201120', 'wa_id': '2348035201120'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAzNTIwMTEyMBUCABEYEjY4RTBBMTAwRDVFREUyQTNFMAA='}]}
2025-07-03 21:55:57,234 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:58,663 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:58] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:58,940 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:58] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:55:59,217 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:55:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:00,470 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:01,073 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:01] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:03,159 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:03] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:04,543 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:04] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:08,612 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:09,115 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:09] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:10,528 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:10] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:13,343 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:13] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:13,911 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:13] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:14,959 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:15,118 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:15,477 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:17,256 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:17] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:17,689 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:17] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:18,957 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:19,262 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:21,136 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:21,605 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:22,325 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:23,100 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:24,316 - handlers.webhook_handler - INFO - Processing message from 2348027283145 (User: Company): {'type': 'text', 'text': 'Yes------I will be there'}
2025-07-03 21:56:24,317 - utils.session_manager - INFO - New session 2348027283145 initialized.
2025-07-03 21:56:24,323 - services.lead_tracker - INFO - New lead tracked: 2348027283145 (Company)
2025-07-03 21:56:24,333 - handlers.base_handler - INFO - Session 2348027283145 identified as guest, prompting for name and address.
2025-07-03 21:56:25,298 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348027283145","wa_id":"2348027283145"}],"messages":[{"id":"wamid.HBgNMjM0ODAyNzI4MzE0NRUCABEYEjlBRTEyQUMxNzI0OTUyNjVFQwA="}]}
2025-07-03 21:56:25,299 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348027283145', 'wa_id': '2348027283145'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAyNzI4MzE0NRUCABEYEjlBRTEyQUMxNzI0OTUyNjVFQwA='}]}
2025-07-03 21:56:25,299 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:25] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:26,215 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:26] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:27,019 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:27] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:27,199 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:27] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:27,205 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:27] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:29,101 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:29,375 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:32,184 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:33,206 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:33,354 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:33,502 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:35,305 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:36,749 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:37,413 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:37] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:37,929 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:37] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:38,713 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:39,146 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:41,155 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:41,379 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:43,753 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:43] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:45,264 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:47,659 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:48,885 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:48] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:48,932 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:48] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:49,002 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:49,208 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:50,309 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:50] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:51,815 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:51] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:53,347 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:53,724 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:54,991 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:57,028 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:57,436 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:58,548 - handlers.webhook_handler - INFO - Processing message from 2348034020426 (User: Ken Dibor): {'type': 'text', 'text': 'Ohh my apologies. I have moved back to UK and only visit Nigeria from time to time. \nI will not make it for the birthday. \nI wish her a happy birthday celebration is advance.'}
2025-07-03 21:56:58,548 - utils.session_manager - INFO - New session 2348034020426 initialized.
2025-07-03 21:56:58,551 - services.lead_tracker - INFO - New lead tracked: 2348034020426 (Ken Dibor)
2025-07-03 21:56:58,560 - handlers.base_handler - INFO - Session 2348034020426 identified as guest, prompting for name and address.
2025-07-03 21:56:59,279 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:59,321 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348034020426","wa_id":"2348034020426"}],"messages":[{"id":"wamid.HBgNMjM0ODAzNDAyMDQyNhUCABEYEjgxMzcyNzU0QzQ2NkNGMERCMQA="}]}
2025-07-03 21:56:59,321 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348034020426', 'wa_id': '2348034020426'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAzNDAyMDQyNhUCABEYEjgxMzcyNzU0QzQ2NkNGMERCMQA='}]}
2025-07-03 21:56:59,322 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:56:59,574 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:56:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:00,548 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:00,601 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:00,798 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:00,945 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:01,703 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:01] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:03,216 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:03] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:03,971 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:03] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:05,657 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:05] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:06,803 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:06] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:07,608 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:09,160 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:09] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:09,888 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:09] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:09,973 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:09] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:10,843 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:10] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:12,106 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:12] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:12,361 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:12] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:14,760 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:16,426 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:16] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:16,760 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:16] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:17,014 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:17] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:18,382 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:18,480 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:19,892 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:22,607 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:22,640 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:26,219 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:26] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:26,416 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:26] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:26,780 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:26] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:28,232 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:28,586 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:29,456 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:30,529 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:30] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:31,394 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:31] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:33,711 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:33,713 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:34,534 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:35,407 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:35,563 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:36,491 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:37,377 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:37] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:37,558 - handlers.webhook_handler - INFO - Processing message from 2348058588888 (User: My Life Is My Message!!): {'type': 'text', 'text': 'I will be there! Thank you'}
2025-07-03 21:57:37,559 - utils.session_manager - INFO - New session 2348058588888 initialized.
2025-07-03 21:57:37,563 - services.lead_tracker - INFO - New lead tracked: 2348058588888 (My Life Is My Message!!)
2025-07-03 21:57:37,569 - handlers.base_handler - INFO - Session 2348058588888 identified as guest, prompting for name and address.
2025-07-03 21:57:38,257 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:38,889 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348058588888","wa_id":"2348058588888"}],"messages":[{"id":"wamid.HBgNMjM0ODA1ODU4ODg4OBUCABEYEkQ0QTgzMjQ1MDAzQzEyNzI2MQA="}]}
2025-07-03 21:57:38,889 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348058588888', 'wa_id': '2348058588888'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1ODU4ODg4OBUCABEYEkQ0QTgzMjQ1MDAzQzEyNzI2MQA='}]}
2025-07-03 21:57:38,890 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:39,913 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:40,911 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:40] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:41,801 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:42,088 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:42,989 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:45,580 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:45,585 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:47,364 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:47,538 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:47,695 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:48,936 - handlers.webhook_handler - INFO - Processing message from 2348034752265 (User: Omoo): {'type': 'text', 'text': 'Good evening. Done.'}
2025-07-03 21:57:48,936 - utils.session_manager - INFO - New session 2348034752265 initialized.
2025-07-03 21:57:48,940 - services.lead_tracker - INFO - New lead tracked: 2348034752265 (Omoo)
2025-07-03 21:57:48,949 - handlers.base_handler - INFO - Session 2348034752265 identified as guest, prompting for name and address.
2025-07-03 21:57:48,996 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:48] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:49,751 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348034752265","wa_id":"2348034752265"}],"messages":[{"id":"wamid.HBgNMjM0ODAzNDc1MjI2NRUCABEYEjQ1REM1NjExNUNGRkI3NTI2RAA="}]}
2025-07-03 21:57:49,752 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348034752265', 'wa_id': '2348034752265'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAzNDc1MjI2NRUCABEYEjQ1REM1NjExNUNGRkI3NTI2RAA='}]}
2025-07-03 21:57:49,752 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:51,387 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:51] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:51,393 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:51] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:51,419 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:51] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:51,970 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:51] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:52,345 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:52] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:52,943 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:52] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:52,960 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:52] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:53,725 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:54,099 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:55,783 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:55] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:56,122 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:56] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:58,154 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:58] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:57:58,507 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:57:58] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:00,432 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:01,367 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:01] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:01,379 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:01] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:02,452 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:02] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:02,529 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:02] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:03,028 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:03] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:04,353 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:04] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:05,124 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:05] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:07,431 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:11,987 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:11] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:15,065 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:24,284 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:24] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:26,019 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:26] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:31,045 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:31] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:33,181 - handlers.webhook_handler - INFO - Processing message from 2349092157050 (User: Afolayan Abiodun): {'type': 'text', 'text': "Hello. I will not be able to attend this event. I'll be out of the country.  Thank you very much"}
2025-07-03 21:58:33,181 - utils.session_manager - INFO - New session 2349092157050 initialized.
2025-07-03 21:58:33,189 - services.lead_tracker - INFO - New lead tracked: 2349092157050 (Afolayan Abiodun)
2025-07-03 21:58:33,199 - handlers.base_handler - INFO - Session 2349092157050 identified as guest, prompting for name and address.
2025-07-03 21:58:34,018 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2349092157050","wa_id":"2349092157050"}],"messages":[{"id":"wamid.HBgNMjM0OTA5MjE1NzA1MBUCABEYEjI2NjYwRUM2NUM1RjNEMEE4MgA="}]}
2025-07-03 21:58:34,019 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2349092157050', 'wa_id': '2349092157050'}], 'messages': [{'id': 'wamid.HBgNMjM0OTA5MjE1NzA1MBUCABEYEjI2NjYwRUM2NUM1RjNEMEE4MgA='}]}
2025-07-03 21:58:34,020 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:38,001 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:58:43,450 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:58:43] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:59:19,135 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:59:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:59:24,701 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:59:24] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:59:31,623 - utils.session_manager - INFO - New session 2348023361055 initialized.
2025-07-03 21:59:31,629 - services.lead_tracker - INFO - New lead tracked: 2348023361055 (Sweet sixteen)
2025-07-03 21:59:31,637 - handlers.base_handler - INFO - Session 2348023361055 identified as guest, prompting for name and address.
2025-07-03 21:59:32,640 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348023361055","wa_id":"2348023361055"}],"messages":[{"id":"wamid.HBgNMjM0ODAyMzM2MTA1NRUCABEYEkIxNTMwN0U4QURBRTRDQzhFMwA="}]}
2025-07-03 21:59:32,641 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348023361055', 'wa_id': '2348023361055'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAyMzM2MTA1NRUCABEYEkIxNTMwN0U4QURBRTRDQzhFMwA='}]}
2025-07-03 21:59:32,641 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:59:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:59:34,108 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:59:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:59:53,998 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:59:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 21:59:57,765 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 21:59:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:00:00,965 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:00:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:00:52,449 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:00:52] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:01:08,952 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:01:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:01:09,406 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:01:09] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:01:44,380 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:01:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:02:14,714 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:02:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:02:33,984 - handlers.webhook_handler - INFO - Processing message from 2348028373794 (User: toplargemakeover): {'type': 'text', 'text': 'Ive rsvp before'}
2025-07-03 22:02:33,987 - utils.session_manager - INFO - New session 2348028373794 initialized.
2025-07-03 22:02:33,993 - services.lead_tracker - INFO - New lead tracked: 2348028373794 (toplargemakeover)
2025-07-03 22:02:34,000 - handlers.base_handler - INFO - Session 2348028373794 identified as guest, prompting for name and address.
2025-07-03 22:02:34,816 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348028373794","wa_id":"2348028373794"}],"messages":[{"id":"wamid.HBgNMjM0ODAyODM3Mzc5NBUCABEYEjEzNkEwMzg3MDU4MkNDMzMxMQA="}]}
2025-07-03 22:02:34,817 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348028373794', 'wa_id': '2348028373794'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAyODM3Mzc5NBUCABEYEjEzNkEwMzg3MDU4MkNDMzMxMQA='}]}
2025-07-03 22:02:34,817 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:02:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:02:36,910 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:02:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:02:40,663 - handlers.webhook_handler - INFO - Processing message from 2348028373794 (User: toplargemakeover): {'type': 'text', 'text': 'Im I doing it again'}
2025-07-03 22:02:40,669 - handlers.message_processor - WARNING - No specific handler or state match for handler 'greeting_handler', state 'guest_info_prompt', message 'im i doing it again' for session 2348028373794. Resetting to greeting.
2025-07-03 22:02:40,670 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348028373794', 'type': 'text', 'text': {'body': "I'm sorry, I didn't quite understand that. Let's get back to the main menu."}}
2025-07-03 22:02:41,351 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348028373794","wa_id":"2348028373794"}],"messages":[{"id":"wamid.HBgNMjM0ODAyODM3Mzc5NBUCABEYEkNDQTVDMzUyRkVEREVCOUUxOQA="}]}
2025-07-03 22:02:42,251 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:02:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:02:42,322 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348028373794","wa_id":"2348028373794"}],"messages":[{"id":"wamid.HBgNMjM0ODAyODM3Mzc5NBUCABEYEjU2QTQ4N0ZERkVFMjJBMUFFMgA="}]}
2025-07-03 22:02:42,322 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348028373794', 'wa_id': '2348028373794'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAyODM3Mzc5NBUCABEYEjU2QTQ4N0ZERkVFMjJBMUFFMgA='}]}
2025-07-03 22:02:42,323 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:02:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:02:43,217 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:02:43] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:02:44,097 - handlers.webhook_handler - INFO - Processing message from 2348023056444 (User: Shemlash Shemlash): {'type': 'text', 'text': 'Confirmed'}
2025-07-03 22:02:44,098 - utils.session_manager - INFO - New session 2348023056444 initialized.
2025-07-03 22:02:44,104 - services.lead_tracker - INFO - New lead tracked: 2348023056444 (Shemlash Shemlash)
2025-07-03 22:02:44,111 - handlers.base_handler - INFO - Session 2348023056444 identified as guest, prompting for name and address.
2025-07-03 22:02:45,045 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348023056444","wa_id":"2348023056444"}],"messages":[{"id":"wamid.HBgNMjM0ODAyMzA1NjQ0NBUCABEYEjk1NTQzMTgxRTczMDUxMURFNAA="}]}
2025-07-03 22:02:45,046 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348023056444', 'wa_id': '2348023056444'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAyMzA1NjQ0NBUCABEYEjk1NTQzMTgxRTczMDUxMURFNAA='}]}
2025-07-03 22:02:45,047 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:02:45] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:02:46,720 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:02:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:14:16,694 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 22:14:18,851 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 22:14:18,851 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 22:14:22,918 - utils.data_manager - ERROR - Database error while loading menu data: connection to server at "localhost" (::1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?

2025-07-03 22:14:22,920 - services.payment_service - INFO - PaymentService initialized
2025-07-03 22:14:22,920 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 22:14:22,921 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 22:14:27,008 - utils.data_manager - ERROR - Database error while loading menu data: connection to server at "localhost" (::1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?

2025-07-03 22:14:27,009 - services.payment_service - INFO - PaymentService initialized
2025-07-03 22:14:27,009 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 22:14:27,009 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 22:14:27,010 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 22:14:27,010 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 22:14:27,010 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 22:14:27,011 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 22:14:27,500 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 22:14:27,501 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 22:14:27,501 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 22:14:27,501 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 22:14:27,516 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 22:14:27,516 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 22:14:52,606 - handlers.webhook_handler - WARNING - No valid message data extracted for 2348098071242. Message type: reaction
2025-07-03 22:14:52,609 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:14:52] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:14:56,071 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:14:56] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:15:05,478 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:15:05] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:15:07,632 - handlers.webhook_handler - INFO - Processing message from 2348098071242 (User: Heritage): {'type': 'text', 'text': 'Done'}
2025-07-03 22:15:07,632 - utils.session_manager - INFO - New session 2348098071242 initialized.
2025-07-03 22:15:07,638 - services.lead_tracker - INFO - New lead tracked: 2348098071242 (Heritage)
2025-07-03 22:15:07,667 - handlers.base_handler - INFO - Session 2348098071242 identified as guest, prompting for name and address.
2025-07-03 22:15:08,535 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348098071242","wa_id":"2348098071242"}],"messages":[{"id":"wamid.HBgNMjM0ODA5ODA3MTI0MhUCABEYEjY4MjU0RUUxQkNFQ0JCRTBEMQA="}]}
2025-07-03 22:15:08,537 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348098071242', 'wa_id': '2348098071242'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA5ODA3MTI0MhUCABEYEjY4MjU0RUUxQkNFQ0JCRTBEMQA='}]}
2025-07-03 22:15:08,538 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:15:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:15:11,616 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:15:11] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:15:12,248 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:15:12] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:15:13,077 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:15:13] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:15:39,048 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:15:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:15:39,348 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:15:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:15:48,033 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:15:48] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:15:54,769 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:15:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:15:58,437 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:15:58] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:16:18,783 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:16:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:16:25,560 - handlers.webhook_handler - INFO - Processing message from 2348037181158 (User: jennifer): {'type': 'text', 'text': 'I did this earlier.'}
2025-07-03 22:16:25,561 - utils.session_manager - INFO - New session 2348037181158 initialized.
2025-07-03 22:16:25,564 - services.lead_tracker - INFO - New lead tracked: 2348037181158 (jennifer)
2025-07-03 22:16:25,573 - handlers.base_handler - INFO - Session 2348037181158 identified as guest, prompting for name and address.
2025-07-03 22:16:26,643 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348037181158","wa_id":"2348037181158"}],"messages":[{"id":"wamid.HBgNMjM0ODAzNzE4MTE1OBUCABEYEjU0OUJCRkQyOURBRDA3MDEzRAA="}]}
2025-07-03 22:16:26,644 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348037181158', 'wa_id': '2348037181158'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAzNzE4MTE1OBUCABEYEjU0OUJCRkQyOURBRDA3MDEzRAA='}]}
2025-07-03 22:16:26,645 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:16:26] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:16:28,547 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:16:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:16:28,907 - handlers.webhook_handler - WARNING - No valid message data extracted for 2349038105300. Message type: sticker
2025-07-03 22:16:28,908 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:16:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:16:34,572 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:16:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:16:37,443 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:16:37] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:16:45,043 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 22:16:46,288 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 22:16:46,289 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 22:16:48,188 - utils.data_manager - INFO - Successfully loaded 17 menu items from database
2025-07-03 22:16:48,409 - services.payment_service - INFO - PaymentService initialized
2025-07-03 22:16:48,409 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 22:16:48,410 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 22:16:50,144 - utils.data_manager - INFO - Successfully loaded 17 menu items from database
2025-07-03 22:16:50,345 - services.payment_service - INFO - PaymentService initialized
2025-07-03 22:16:50,346 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 22:16:50,346 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 22:16:50,347 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 22:16:50,347 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 22:16:50,347 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 22:16:50,348 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 22:16:50,718 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 22:16:50,718 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 22:16:50,719 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 22:16:50,719 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 22:16:50,730 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 22:16:50,730 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 22:16:51,659 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:16:51] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:16:53,591 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:16:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:18,083 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:23,619 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:29,237 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Hello'}
2025-07-03 22:17:29,238 - utils.session_manager - INFO - New session 2348055614455 initialized.
2025-07-03 22:17:29,243 - handlers.base_handler - INFO - Session 2348055614455 recognized user 'Ziga'.
2025-07-03 22:17:29,364 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:29,991 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjdEMkQ2RjU0MzZBMzFERUJDRgA="}]}
2025-07-03 22:17:29,992 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjdEMkQ2RjU0MzZBMzFERUJDRgA='}]}
2025-07-03 22:17:29,992 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:30,896 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:30] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:32,006 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:34,803 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'ai_bulk_order_direct'}
2025-07-03 22:17:34,806 - handlers.base_handler - INFO - GreetingHandler: Handling message 'ai_bulk_order_direct' in greeting state for session 2348055614455.
2025-07-03 22:17:34,806 - handlers.base_handler - INFO - Session 2348055614455 redirecting to AIHandler for AI Bulk Order (Let Lola Order).
2025-07-03 22:17:34,807 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'ai_handler' with message 'start_ai_bulk_order'.
2025-07-03 22:17:34,807 - handlers.base_handler - INFO - AIHandler: Handling message 'start_ai_bulk_order' in AI bulk order state for session 2348055614455. Original: 'ai_bulk_order_direct'
2025-07-03 22:17:34,807 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'image', 'image': {'link': 'https://test.mackennytutors.com/wp-content/uploads/2025/06/ganador.jpg', 'caption': 'Our Delicious Menu!'}}
2025-07-03 22:17:35,957 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkQ3NjI2NUYyNkE4QjkzMjA0QgA="}]}
2025-07-03 22:17:35,958 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': "Hi, I'm Lola from Ganador \n\nTake a look at the menu and type in your order\n\n"}}
2025-07-03 22:17:36,692 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjBENDU5MkYxMEFBM0RBNzMwOQA="}]}
2025-07-03 22:17:36,692 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjBENDU5MkYxMEFBM0RBNzMwOQA='}]}
2025-07-03 22:17:36,693 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:37,463 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:37] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:37,936 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:37] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:38,194 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:38,428 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:38,564 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:39,130 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:45,231 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Jellof rice'}
2025-07-03 22:17:45,234 - handlers.base_handler - INFO - AIHandler: Handling message 'jellof rice' in AI bulk order state for session 2348055614455. Original: 'Jellof rice'
2025-07-03 22:17:46,005 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkM2RDE3NEY1NEQ4RDQwQkY5MgA="}]}
2025-07-03 22:17:46,016 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkM2RDE3NEY1NEQ4RDQwQkY5MgA='}]}
2025-07-03 22:17:46,016 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:46,749 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:46] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:47,254 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:47,596 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:49,127 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:17:57,091 - handlers.webhook_handler - WARNING - No valid message data extracted for 2348183929999. Message type: reaction
2025-07-03 22:17:57,091 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:17:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:18:15,256 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:18:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:18:15,378 - handlers.webhook_handler - INFO - Processing message from 2348069405920 (User: Oluwaseun is Ewaoluwa): {'type': 'text', 'text': 'Good evening'}
2025-07-03 22:18:15,379 - utils.session_manager - INFO - New session 2348069405920 initialized.
2025-07-03 22:18:15,383 - services.lead_tracker - INFO - New lead tracked: 2348069405920 (Oluwaseun is Ewaoluwa)
2025-07-03 22:18:15,391 - handlers.base_handler - INFO - Session 2348069405920 identified as guest, prompting for name and address.
2025-07-03 22:18:16,197 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348069405920","wa_id":"2348069405920"}],"messages":[{"id":"wamid.HBgNMjM0ODA2OTQwNTkyMBUCABEYEkNDRjM2MDk3NjYxNjczNDA5RgA="}]}
2025-07-03 22:18:16,198 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348069405920', 'wa_id': '2348069405920'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA2OTQwNTkyMBUCABEYEkNDRjM2MDk3NjYxNjczNDA5RgA='}]}
2025-07-03 22:18:16,198 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:18:16] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:18:18,809 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:18:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:18:19,654 - handlers.webhook_handler - INFO - Processing message from 2348069405920 (User: Oluwaseun is Ewaoluwa): {'type': 'text', 'text': 'Done'}
2025-07-03 22:18:19,661 - handlers.message_processor - WARNING - No specific handler or state match for handler 'greeting_handler', state 'guest_info_prompt', message 'done' for session 2348069405920. Resetting to greeting.
2025-07-03 22:18:19,662 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348069405920', 'type': 'text', 'text': {'body': "I'm sorry, I didn't quite understand that. Let's get back to the main menu."}}
2025-07-03 22:18:19,808 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:18:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:18:20,288 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348069405920","wa_id":"2348069405920"}],"messages":[{"id":"wamid.HBgNMjM0ODA2OTQwNTkyMBUCABEYEjU1MzFEMEY3RUE0MzJGMDc3OQA="}]}
2025-07-03 22:18:20,849 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348069405920","wa_id":"2348069405920"}],"messages":[{"id":"wamid.HBgNMjM0ODA2OTQwNTkyMBUCABEYEkRFODdGMzNENjYyQUIxNDcxQgA="}]}
2025-07-03 22:18:20,849 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348069405920', 'wa_id': '2348069405920'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA2OTQwNTkyMBUCABEYEkRFODdGMzNENjYyQUIxNDcxQgA='}]}
2025-07-03 22:18:20,850 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:18:20] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:18:20,922 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:18:20] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:18:21,792 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:18:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:18:23,916 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:18:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:19:02,433 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:19:02] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:19:32,816 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:19:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:20:19,093 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:20:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:21:41,508 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:21:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:25:48,241 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 22:25:49,742 - __main__ - ERROR - Import error: No module named 'product_sync_handler'
2025-07-03 22:27:18,900 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 22:27:20,013 - __main__ - ERROR - Import error: No module named 'product_sync_handler'
2025-07-03 22:27:31,547 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 22:27:32,812 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 22:27:32,813 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 22:27:32,814 - services.payment_service - INFO - PaymentService initialized
2025-07-03 22:27:36,422 - handlers.product_sync_handler - INFO - Successfully synced 17 products to data\products.json
2025-07-03 22:27:36,715 - app - INFO - Initial product sync successful on startup
2025-07-03 22:27:36,715 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 22:27:36,715 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 22:27:36,716 - services.payment_service - INFO - PaymentService initialized
2025-07-03 22:27:36,716 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 22:27:36,716 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 22:27:36,717 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 22:27:36,717 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 22:27:36,718 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 22:27:36,718 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 22:27:37,174 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 22:27:37,175 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 22:27:37,175 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 22:27:37,175 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 22:27:37,191 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 22:27:37,191 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 22:28:08,110 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 22:28:09,258 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 22:28:09,259 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 22:28:09,260 - services.payment_service - INFO - PaymentService initialized
2025-07-03 22:28:11,045 - handlers.product_sync_handler - INFO - Successfully synced 17 products to data\products.json
2025-07-03 22:28:11,264 - app - INFO - Initial product sync successful on startup
2025-07-03 22:28:11,264 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 22:28:11,265 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 22:28:11,266 - services.payment_service - INFO - PaymentService initialized
2025-07-03 22:28:11,266 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 22:28:11,266 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 22:28:11,267 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 22:28:11,267 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 22:28:11,267 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 22:28:11,268 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 22:28:11,670 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 22:28:11,670 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 22:28:11,671 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 22:28:11,671 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 22:28:11,683 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 22:28:11,683 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 22:28:12,098 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:12] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:15,001 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Hello'}
2025-07-03 22:28:15,001 - utils.session_manager - INFO - New session 2348055614455 initialized.
2025-07-03 22:28:15,016 - handlers.base_handler - INFO - Session 2348055614455 recognized user 'Ziga'.
2025-07-03 22:28:15,838 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjUwMTJBNzA2MUU3MURBRDRCNwA="}]}
2025-07-03 22:28:15,839 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjUwMTJBNzA2MUU3MURBRDRCNwA='}]}
2025-07-03 22:28:15,839 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:16,673 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:16] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:16,910 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:16] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:17,280 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:17] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:18,587 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'ai_bulk_order_direct'}
2025-07-03 22:28:18,590 - handlers.base_handler - INFO - GreetingHandler: Handling message 'ai_bulk_order_direct' in greeting state for session 2348055614455.
2025-07-03 22:28:18,590 - handlers.base_handler - INFO - Session 2348055614455 redirecting to AIHandler for AI Bulk Order (Let Lola Order).
2025-07-03 22:28:18,591 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'ai_handler' with message 'start_ai_bulk_order'.
2025-07-03 22:28:18,591 - handlers.base_handler - INFO - AIHandler: Handling message 'start_ai_bulk_order' in AI bulk order state for session 2348055614455. Original: 'ai_bulk_order_direct'
2025-07-03 22:28:18,592 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'image', 'image': {'link': 'https://test.mackennytutors.com/wp-content/uploads/2025/06/ganador.jpg', 'caption': 'Our Delicious Menu!'}}
2025-07-03 22:28:19,342 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjNDQ0Y5RDA2QUE5REFGREJCMgA="}]}
2025-07-03 22:28:19,343 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': "Hi, I'm Lola from Ganador \n\nTake a look at the menu and type in your order\n\n"}}
2025-07-03 22:28:20,142 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkI4QjQ1RjU3QkI1NjVCNTZFNAA="}]}
2025-07-03 22:28:20,143 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkI4QjQ1RjU3QkI1NjVCNTZFNAA='}]}
2025-07-03 22:28:20,143 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:20] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:20,969 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:20] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:21,197 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:21,555 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:21,812 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:21,821 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:22,407 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:25,396 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Fried rice'}
2025-07-03 22:28:25,399 - handlers.base_handler - INFO - AIHandler: Handling message 'fried rice' in AI bulk order state for session 2348055614455. Original: 'Fried rice'
2025-07-03 22:28:27,752 - httpx - INFO - HTTP Request: POST https://insig-maduyfup-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-35-turbo/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
2025-07-03 22:28:28,427 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjQyN0JDRTg5OEY2MEYxNDNDOAA="}]}
2025-07-03 22:28:28,428 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjQyN0JDRTg5OEY2MEYxNDNDOAA='}]}
2025-07-03 22:28:28,428 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:29,383 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:29,493 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:29,884 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:46,400 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 22:28:47,675 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 22:28:47,676 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 22:28:47,676 - utils.data_manager - WARNING - File not found or empty: data\menu.json
2025-07-03 22:28:47,676 - utils.data_manager - WARNING - Menu data in data\menu.json is not a dictionary. Initializing as empty.
2025-07-03 22:28:47,677 - services.payment_service - INFO - PaymentService initialized
2025-07-03 22:28:49,519 - handlers.product_sync_handler - INFO - Successfully synced 17 products to data\products.json
2025-07-03 22:28:49,722 - app - INFO - Initial product sync successful on startup
2025-07-03 22:28:49,722 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 22:28:49,723 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 22:28:49,723 - utils.data_manager - WARNING - File not found or empty: data\menu.json
2025-07-03 22:28:49,723 - utils.data_manager - WARNING - Menu data in data\menu.json is not a dictionary. Initializing as empty.
2025-07-03 22:28:49,724 - services.payment_service - INFO - PaymentService initialized
2025-07-03 22:28:49,724 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 22:28:49,724 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 22:28:49,725 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 22:28:49,725 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 22:28:49,725 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 22:28:49,726 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 22:28:50,107 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 22:28:50,107 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 22:28:50,107 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 22:28:50,108 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 22:28:50,119 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 22:28:50,119 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 22:28:52,237 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Hello'}
2025-07-03 22:28:52,237 - utils.session_manager - INFO - New session 2348055614455 initialized.
2025-07-03 22:28:52,243 - handlers.base_handler - INFO - Session 2348055614455 recognized user 'Ziga'.
2025-07-03 22:28:52,928 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjgwMTE4RkMwRERBNUNDRjdCQgA="}]}
2025-07-03 22:28:52,929 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjgwMTE4RkMwRERBNUNDRjdCQgA='}]}
2025-07-03 22:28:52,930 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:52] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:53,661 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:53,927 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:53] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:54,398 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:55,556 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'ai_bulk_order_direct'}
2025-07-03 22:28:55,559 - handlers.base_handler - INFO - GreetingHandler: Handling message 'ai_bulk_order_direct' in greeting state for session 2348055614455.
2025-07-03 22:28:55,560 - handlers.base_handler - INFO - Session 2348055614455 redirecting to AIHandler for AI Bulk Order (Let Lola Order).
2025-07-03 22:28:55,560 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'ai_handler' with message 'start_ai_bulk_order'.
2025-07-03 22:28:55,561 - handlers.base_handler - INFO - AIHandler: Handling message 'start_ai_bulk_order' in AI bulk order state for session 2348055614455. Original: 'ai_bulk_order_direct'
2025-07-03 22:28:55,561 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'image', 'image': {'link': 'https://test.mackennytutors.com/wp-content/uploads/2025/06/ganador.jpg', 'caption': 'Our Delicious Menu!'}}
2025-07-03 22:28:56,220 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjZDODcyQTMzMUVCMzYxQ0UxRAA="}]}
2025-07-03 22:28:56,220 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': "Hi, I'm Lola from Ganador \n\nTake a look at the menu and type in your order\n\n"}}
2025-07-03 22:28:56,903 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjZBQzQ3NDlEQzM4QThFODNFRgA="}]}
2025-07-03 22:28:56,904 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjZBQzQ3NDlEQzM4QThFODNFRgA='}]}
2025-07-03 22:28:56,905 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:56] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:57,396 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:57,449 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:57,607 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:57,898 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:57,906 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:28:58,222 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:28:58] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:29:01,694 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Fried'}
2025-07-03 22:29:01,697 - handlers.base_handler - INFO - AIHandler: Handling message 'fried' in AI bulk order state for session 2348055614455. Original: 'Fried'
2025-07-03 22:29:01,697 - services.ai_service - WARNING - Menu data not available in DataManager for AI context.
2025-07-03 22:29:03,972 - httpx - INFO - HTTP Request: POST https://insig-maduyfup-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-35-turbo/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
2025-07-03 22:29:04,730 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjYxRjIxMTFDMEUwQ0NGNzdCRAA="}]}
2025-07-03 22:29:04,731 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjYxRjIxMTFDMEUwQ0NGNzdCRAA='}]}
2025-07-03 22:29:04,731 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:29:04] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:29:05,545 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:29:05] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:29:05,742 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:29:05] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:29:06,407 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:29:06] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:29:32,839 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:29:32] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:09,713 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 22:30:10,898 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 22:30:10,899 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 22:30:10,899 - services.payment_service - INFO - PaymentService initialized
2025-07-03 22:30:13,097 - handlers.product_sync_handler - INFO - Successfully synced 17 products to data\products.json
2025-07-03 22:30:13,322 - app - INFO - Initial product sync successful on startup
2025-07-03 22:30:13,322 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 22:30:13,323 - utils.data_manager - INFO - Successfully loaded 1 user details from data\user_details.json
2025-07-03 22:30:13,324 - services.payment_service - INFO - PaymentService initialized
2025-07-03 22:30:13,324 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 22:30:13,324 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 22:30:13,325 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 22:30:13,325 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 22:30:13,326 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 22:30:13,326 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 22:30:13,713 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 22:30:13,714 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 22:30:13,714 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 22:30:13,714 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 22:30:13,726 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 22:30:13,726 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 22:30:16,434 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Chicken'}
2025-07-03 22:30:16,434 - utils.session_manager - INFO - New session 2348055614455 initialized.
2025-07-03 22:30:16,439 - handlers.base_handler - INFO - Session 2348055614455 recognized user 'Ziga'.
2025-07-03 22:30:17,165 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkRCQTlGNDU0MjE1Q0U2RjdDMAA="}]}
2025-07-03 22:30:17,165 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkRCQTlGNDU0MjE1Q0U2RjdDMAA='}]}
2025-07-03 22:30:17,166 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:17] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:18,120 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:18,716 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:18,723 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:18,759 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:20,163 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'ai_bulk_order_direct'}
2025-07-03 22:30:20,166 - handlers.base_handler - INFO - GreetingHandler: Handling message 'ai_bulk_order_direct' in greeting state for session 2348055614455.
2025-07-03 22:30:20,166 - handlers.base_handler - INFO - Session 2348055614455 redirecting to AIHandler for AI Bulk Order (Let Lola Order).
2025-07-03 22:30:20,167 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'ai_handler' with message 'start_ai_bulk_order'.
2025-07-03 22:30:20,167 - handlers.base_handler - INFO - AIHandler: Handling message 'start_ai_bulk_order' in AI bulk order state for session 2348055614455. Original: 'ai_bulk_order_direct'
2025-07-03 22:30:20,168 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'image', 'image': {'link': 'https://test.mackennytutors.com/wp-content/uploads/2025/06/ganador.jpg', 'caption': 'Our Delicious Menu!'}}
2025-07-03 22:30:21,123 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjVBQ0FBMEM0MTFBNjFCRUEwNgA="}]}
2025-07-03 22:30:21,124 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': "Hi, I'm Lola from Ganador \n\nTake a look at the menu and type in your order\n\n"}}
2025-07-03 22:30:21,945 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkIwNERFMDIyRUZBM0VGQTYxRgA="}]}
2025-07-03 22:30:21,946 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkIwNERFMDIyRUZBM0VGQTYxRgA='}]}
2025-07-03 22:30:21,947 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:22,197 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:22,434 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:22,804 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:23,106 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:23,147 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:23,431 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:25,469 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Chicken'}
2025-07-03 22:30:25,472 - handlers.base_handler - INFO - AIHandler: Handling message 'chicken' in AI bulk order state for session 2348055614455. Original: 'Chicken'
2025-07-03 22:30:27,644 - httpx - INFO - HTTP Request: POST https://insig-maduyfup-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-35-turbo/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
2025-07-03 22:30:28,412 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkM0QkNGQUZDRjMxRjYzNzQyQQA="}]}
2025-07-03 22:30:28,413 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkM0QkNGQUZDRjMxRjYzNzQyQQA='}]}
2025-07-03 22:30:28,413 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:29,456 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:29,458 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:29,687 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:53,765 - handlers.webhook_handler - INFO - Processing message from 2348034363557 (User: Afolabi Abiodun): {'type': 'text', 'text': 'Thanks God, Big congratulations to family'}
2025-07-03 22:30:53,765 - utils.session_manager - INFO - New session 2348034363557 initialized.
2025-07-03 22:30:53,773 - services.lead_tracker - INFO - New lead tracked: 2348034363557 (Afolabi Abiodun)
2025-07-03 22:30:53,787 - handlers.base_handler - INFO - Session 2348034363557 identified as guest, prompting for name and address.
2025-07-03 22:30:54,533 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348034363557","wa_id":"2348034363557"}],"messages":[{"id":"wamid.HBgNMjM0ODAzNDM2MzU1NxUCABEYEkVFNTZDODdDRUQ5MjI2RUJDRQA="}]}
2025-07-03 22:30:54,534 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348034363557', 'wa_id': '2348034363557'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAzNDM2MzU1NxUCABEYEkVFNTZDODdDRUQ5MjI2RUJDRQA='}]}
2025-07-03 22:30:54,535 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:30:55,599 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:30:55] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:31:23,134 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:31:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:31:31,327 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:31:31] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:39:01,511 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 22:39:04,531 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 22:39:09,029 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 22:39:09,240 - services.payment_service - INFO - PaymentService initialized
2025-07-03 22:39:11,158 - handlers.product_sync_handler - INFO - Successfully synced 17 products to data\products.json
2025-07-03 22:39:11,384 - app - INFO - Initial product sync successful on startup
2025-07-03 22:39:11,385 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 22:39:13,426 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 22:39:13,829 - services.payment_service - INFO - PaymentService initialized
2025-07-03 22:39:13,829 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 22:39:13,830 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 22:39:13,881 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 22:39:13,882 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 22:39:13,883 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 22:39:13,883 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 22:39:14,683 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 22:39:14,683 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 22:39:14,684 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 22:39:14,685 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 22:39:14,762 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 22:39:14,763 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 22:39:17,039 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Hello'}
2025-07-03 22:39:17,040 - utils.session_manager - INFO - New session 2348055614455 initialized.
2025-07-03 22:39:17,052 - handlers.base_handler - INFO - Session 2348055614455 identified as guest, prompting for name and address.
2025-07-03 22:39:18,357 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjlGMzUxMDUyNjUyNUQ3NDMwNwA="}]}
2025-07-03 22:39:18,359 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjlGMzUxMDUyNjUyNUQ3NDMwNwA='}]}
2025-07-03 22:39:18,361 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:39:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:39:19,102 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:39:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:39:19,564 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:39:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:39:19,746 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:39:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:39:21,266 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:39:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:39:27,183 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Victor,Makinde'}
2025-07-03 22:39:27,187 - handlers.message_processor - WARNING - No specific handler or state match for handler 'greeting_handler', state 'guest_info_prompt', message 'victor,makinde' for session 2348055614455. Resetting to greeting.
2025-07-03 22:39:27,188 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': "I'm sorry, I didn't quite understand that. Let's get back to the main menu."}}
2025-07-03 22:39:28,039 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjBCMjU4QTUxNTBDNDU5M0M3QQA="}]}
2025-07-03 22:39:28,820 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkZCNDM0QjQ2ODcxMjdDRDAyQQA="}]}
2025-07-03 22:39:28,821 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkZCNDM0QjQ2ODcxMjdDRDAyQQA='}]}
2025-07-03 22:39:28,823 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:39:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:39:28,847 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:39:28] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:39:29,172 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:39:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:39:29,717 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:39:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:39:29,780 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:39:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:39:29,922 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:39:29] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:39:30,665 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 22:39:30] "POST /webhook HTTP/1.1" 200 -
2025-07-03 22:59:47,767 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 22:59:48,692 - __main__ - ERROR - Import error: cannot import name 'OrderHandler' from 'handlers.order_handler' (C:\Users\zigam\Documents\Lola\app\handlers\order_handler.py)
2025-07-03 23:01:57,111 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 23:01:59,013 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:02:01,802 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:02:02,022 - utils.data_manager - WARNING - File not found or empty: data\menu.json
2025-07-03 23:02:02,022 - utils.data_manager - WARNING - Menu data in data\menu.json is not a dictionary. Initializing as empty.
2025-07-03 23:02:02,023 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:02:03,970 - handlers.product_sync_handler - INFO - Successfully synced 17 products to data\products.json
2025-07-03 23:02:04,191 - app - INFO - Initial product sync successful on startup
2025-07-03 23:02:04,192 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:02:06,064 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:02:06,274 - utils.data_manager - WARNING - File not found or empty: data\menu.json
2025-07-03 23:02:06,274 - utils.data_manager - WARNING - Menu data in data\menu.json is not a dictionary. Initializing as empty.
2025-07-03 23:02:06,274 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:02:06,275 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 23:02:06,275 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 23:02:06,277 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 23:02:06,277 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 23:02:06,277 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:02:06,277 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 23:02:06,750 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 23:02:06,750 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 23:02:06,750 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 23:02:06,751 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:02:06,778 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 23:02:06,778 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 23:02:40,267 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Hello'}
2025-07-03 23:02:40,268 - utils.session_manager - INFO - New session 2348055614455 initialized.
2025-07-03 23:02:42,601 - handlers.base_handler - INFO - Session 2348055614455 identified as guest, prompting for name and address.
2025-07-03 23:02:43,475 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjM5OEI3NTdBOUEzOTAwNDk5RAA="}]}
2025-07-03 23:02:43,476 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjM5OEI3NTdBOUEzOTAwNDk5RAA='}]}
2025-07-03 23:02:43,477 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:02:43] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:02:44,360 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:02:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:02:44,585 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:02:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:02:57,798 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Victor,'}
2025-07-03 23:02:57,801 - handlers.message_processor - WARNING - No specific handler or state match for handler 'greeting_handler', state 'guest_info_prompt', message 'victor,' for session 2348055614455. Resetting to greeting.
2025-07-03 23:02:57,801 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': "I'm sorry, I didn't quite understand that. Let's get back to the main menu."}}
2025-07-03 23:02:58,498 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkZCQkQ1NzVEOTc5REI5MTdBNQA="}]}
2025-07-03 23:02:59,232 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjY3QkQ5MzA1OEY2RjZDOUUyMQA="}]}
2025-07-03 23:02:59,233 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjY3QkQ5MzA1OEY2RjZDOUUyMQA='}]}
2025-07-03 23:02:59,233 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:02:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:02:59,436 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:02:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:02:59,623 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:02:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:02:59,940 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:02:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:03:00,071 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:03:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:03:00,291 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:03:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:03:00,602 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:03:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:03:03,033 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'ai_bulk_order_direct'}
2025-07-03 23:03:03,037 - handlers.base_handler - INFO - GreetingHandler: Handling message 'ai_bulk_order_direct' in greeting state for session 2348055614455.
2025-07-03 23:03:03,037 - handlers.base_handler - INFO - Session 2348055614455 redirecting to AIHandler for AI Bulk Order (Let Lola Order).
2025-07-03 23:03:03,038 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'ai_handler' with message 'start_ai_bulk_order'.
2025-07-03 23:03:03,039 - handlers.base_handler - INFO - AIHandler: Handling message 'start_ai_bulk_order' in AI bulk order state for session 2348055614455. Original: 'ai_bulk_order_direct'
2025-07-03 23:03:03,040 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'image', 'image': {'link': 'https://test.mackennytutors.com/wp-content/uploads/2025/06/ganador.jpg', 'caption': 'Our Delicious Menu!'}}
2025-07-03 23:03:04,050 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkYyRDAyNUU0OEVGMTVBQUYxOQA="}]}
2025-07-03 23:03:04,050 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': "Hi, I'm Lola from Ganador \n\nTake a look at the menu and type in your order\n\n"}}
2025-07-03 23:03:04,872 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjA5NjRCOTQwQ0E4NDQ1RDVFQwA="}]}
2025-07-03 23:03:04,873 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjA5NjRCOTQwQ0E4NDQ1RDVFQwA='}]}
2025-07-03 23:03:04,873 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:03:04] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:03:05,838 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:03:05] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:03:06,032 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:03:06] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:03:06,330 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:03:06] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:03:06,654 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:03:06] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:03:10,859 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Jellof rice'}
2025-07-03 23:03:10,863 - handlers.base_handler - INFO - AIHandler: Handling message 'jellof rice' in AI bulk order state for session 2348055614455. Original: 'Jellof rice'
2025-07-03 23:03:10,864 - services.ai_service - WARNING - Menu data not available in DataManager for AI context.
2025-07-03 23:03:13,487 - httpx - INFO - HTTP Request: POST https://insig-maduyfup-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-35-turbo/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
2025-07-03 23:03:14,144 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjBENjgxMzc4OURFREE5QUY2QQA="}]}
2025-07-03 23:03:14,145 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjBENjgxMzc4OURFREE5QUY2QQA='}]}
2025-07-03 23:03:14,145 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:03:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:03:15,094 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:03:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:03:15,170 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:03:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:03:15,407 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:03:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:04:39,963 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:04:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:04:49,694 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:04:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:05:14,937 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:05:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:05:31,994 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 23:05:33,970 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:05:33,970 - app - ERROR - Error initializing a core service: 'Config' object has no attribute 'PRODUCTS_FILE'
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 39, in <module>
    data_manager = DataManager(config)
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 24, in __init__
    self._ensure_data_directory_exists()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 30, in _ensure_data_directory_exists
    data_dir = os.path.dirname(self.config.PRODUCTS_FILE) # Changed from MENU_FILE to PRODUCTS_FILE
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Config' object has no attribute 'PRODUCTS_FILE'. Did you mean: 'PRODUCT_MENU_FILE'?
2025-07-03 23:06:48,494 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 23:06:49,616 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:06:49,617 - app - ERROR - Error initializing a core service: 'Config' object has no attribute 'PRODUCTS_FILE'
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 39, in <module>
    data_manager = DataManager(config)
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 24, in __init__
    self._ensure_data_directory_exists()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 30, in _ensure_data_directory_exists
    data_dir = os.path.dirname(self.config.PRODUCTS_FILE) # Changed from MENU_FILE to PRODUCTS_FILE
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Config' object has no attribute 'PRODUCTS_FILE'. Did you mean: 'PRODUCT_MENU_FILE'?
2025-07-03 23:07:20,210 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 23:07:21,318 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:07:21,318 - app - ERROR - Error initializing a core service: 'Config' object has no attribute 'PRODUCTS_FILE'
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 39, in <module>
    data_manager = DataManager(config)
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 24, in __init__
    self._ensure_data_directory_exists()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 30, in _ensure_data_directory_exists
    data_dir = os.path.dirname(self.config.PRODUCTS_FILE) # Changed from MENU_FILE to PRODUCTS_FILE
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Config' object has no attribute 'PRODUCTS_FILE'. Did you mean: 'PRODUCT_FILE'?
2025-07-03 23:09:22,482 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 23:09:23,611 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:09:25,575 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:09:25,788 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:09:25,788 - app - ERROR - Error initializing a core service: 'Config' object has no attribute 'MENU_FILE'
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 43, in <module>
    product_sync_handler = ProductSyncHandler(config)
  File "C:\Users\zigam\Documents\Lola\app\handlers\product_sync_handler.py", line 22, in __init__
    self.json_file_path = os.path.join(os.path.dirname(self.config.MENU_FILE), 'products.json')
                                                       ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Config' object has no attribute 'MENU_FILE'
2025-07-03 23:12:05,583 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 23:12:07,583 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:12:11,259 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:12:11,514 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:12:13,358 - handlers.product_sync_handler - INFO - Successfully synced 17 products to data\products.json
2025-07-03 23:12:13,572 - app - INFO - Initial product sync successful on startup
2025-07-03 23:12:13,572 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:12:15,492 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:12:15,707 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:12:15,707 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 23:12:15,708 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 23:12:15,720 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 23:12:15,720 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 23:12:15,721 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:12:15,721 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 23:12:16,156 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 23:12:16,157 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 23:12:16,157 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 23:12:16,157 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:12:16,183 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 23:12:16,184 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 23:12:16,700 - handlers.webhook_handler - INFO - Processing message from 2348092166618 (User: 'Derin): {'type': 'text', 'text': 'I already did, vide your similar chat on 25 June. Please cross-check.'}
2025-07-03 23:12:16,700 - utils.session_manager - INFO - New session 2348092166618 initialized.
2025-07-03 23:12:16,703 - services.lead_tracker - INFO - New lead tracked: 2348092166618 ('Derin)
2025-07-03 23:12:18,750 - handlers.base_handler - INFO - Session 2348092166618 identified as guest, prompting for name and address.
2025-07-03 23:12:19,526 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348092166618","wa_id":"2348092166618"}],"messages":[{"id":"wamid.HBgNMjM0ODA5MjE2NjYxOBUCABEYEjBCRjZDQzYwQTQ4NDVCMjkwMwA="}]}
2025-07-03 23:12:19,527 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348092166618', 'wa_id': '2348092166618'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA5MjE2NjYxOBUCABEYEjBCRjZDQzYwQTQ4NDVCMjkwMwA='}]}
2025-07-03 23:12:19,528 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:12:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:12:21,708 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:12:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:12:42,599 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:12:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:17:18,404 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:17:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:18:07,006 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Hello'}
2025-07-03 23:18:07,008 - utils.session_manager - INFO - New session 2348055614455 initialized.
2025-07-03 23:18:11,665 - handlers.base_handler - INFO - Session 2348055614455 identified as guest, prompting for name and address.
2025-07-03 23:18:13,278 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkNBNDE0Njk1QTQxQjBDODUwQgA="}]}
2025-07-03 23:18:13,279 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkNBNDE0Njk1QTQxQjBDODUwQgA='}]}
2025-07-03 23:18:13,280 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:18:13] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:18:14,313 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:18:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:18:14,514 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:18:14] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:20:33,809 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:20:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:22:16,959 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 23:22:18,430 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:22:20,896 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:22:21,098 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:22:23,096 - handlers.product_sync_handler - INFO - Successfully synced 17 products to data\products.json
2025-07-03 23:22:23,290 - app - INFO - Initial product sync successful on startup
2025-07-03 23:22:23,290 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:22:25,063 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:22:25,277 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:22:25,277 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 23:22:25,277 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 23:22:25,280 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 23:22:25,281 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 23:22:25,281 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:22:25,282 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 23:22:25,719 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 23:22:25,719 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 23:22:25,719 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 23:22:25,720 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:22:25,753 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 23:22:25,753 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 23:22:32,953 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Hell'}
2025-07-03 23:22:32,953 - utils.session_manager - INFO - New session 2348055614455 initialized.
2025-07-03 23:22:34,977 - handlers.base_handler - INFO - Session 2348055614455 identified as new or incomplete, prompting for name and address.
2025-07-03 23:22:35,740 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkNDMDgxMDREQTQ4NkZDMzc0NAA="}]}
2025-07-03 23:22:35,740 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkNDMDgxMDREQTQ4NkZDMzc0NAA='}]}
2025-07-03 23:22:35,741 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:22:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:22:36,670 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:22:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:22:36,881 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:22:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:22:36,987 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:22:36] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:22:39,940 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:22:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:23:39,473 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Victor Makinde,Lekki, Lagos'}
2025-07-03 23:23:39,477 - handlers.message_processor - WARNING - No specific handler or state match for handler 'greeting_handler', state 'guest_info_prompt', message 'victor makinde,lekki, lagos' for session 2348055614455. Resetting to greeting.
2025-07-03 23:23:39,478 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': "I'm sorry, I didn't quite understand that. Let's get back to the main menu."}}
2025-07-03 23:23:40,375 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkFCMEQ0MUVGNDJEQ0ZDQTM4QgA="}]}
2025-07-03 23:23:41,073 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjIwMTYzRUNCOTg5QjUyRTk1RAA="}]}
2025-07-03 23:23:41,074 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjIwMTYzRUNCOTg5QjUyRTk1RAA='}]}
2025-07-03 23:23:41,075 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:23:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:23:41,452 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:23:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:23:41,462 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:23:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:23:41,601 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:23:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:23:41,920 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:23:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:23:41,953 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:23:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:23:42,002 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:23:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:23:59,049 - handlers.webhook_handler - INFO - Processing message from 2348033804161 (User: Boye Oloyede): {'type': 'text', 'text': "Blessed evening, I have RSVP my wife's attendance as I won't be around."}
2025-07-03 23:23:59,052 - utils.session_manager - INFO - New session 2348033804161 initialized.
2025-07-03 23:23:59,058 - services.lead_tracker - INFO - New lead tracked: 2348033804161 (Boye Oloyede)
2025-07-03 23:24:05,815 - handlers.base_handler - INFO - Session 2348033804161 identified as new or incomplete, prompting for name and address.
2025-07-03 23:24:06,771 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348033804161","wa_id":"2348033804161"}],"messages":[{"id":"wamid.HBgNMjM0ODAzMzgwNDE2MRUCABEYEjcwRUY0MUJEMUVCRTRFMUFDNwA="}]}
2025-07-03 23:24:06,772 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348033804161', 'wa_id': '2348033804161'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAzMzgwNDE2MRUCABEYEjcwRUY0MUJEMUVCRTRFMUFDNwA='}]}
2025-07-03 23:24:06,772 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:24:06] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:24:09,633 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:24:09] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:24:10,705 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:24:10] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:24:33,663 - handlers.webhook_handler - WARNING - No valid message data extracted for 2348033804161. Message type: unsupported
2025-07-03 23:24:33,664 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:24:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:24:39,234 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:24:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:15,121 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 23:25:16,478 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:25:18,912 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:25:19,125 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:25:21,074 - handlers.product_sync_handler - INFO - Successfully synced 17 products to data\products.json
2025-07-03 23:25:21,281 - app - INFO - Initial product sync successful on startup
2025-07-03 23:25:21,281 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:25:24,300 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:25:24,505 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:25:24,506 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 23:25:24,506 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 23:25:24,507 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 23:25:24,507 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 23:25:24,508 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:25:24,508 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 23:25:24,922 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 23:25:24,922 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 23:25:24,922 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 23:25:24,923 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:25:24,950 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 23:25:24,951 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 23:25:30,370 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Hello'}
2025-07-03 23:25:30,371 - utils.session_manager - INFO - New session 2348055614455 initialized.
2025-07-03 23:25:32,341 - handlers.base_handler - INFO - Session 2348055614455 greeted user 'Victor'.
2025-07-03 23:25:33,171 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjJERUY0NUQ0Mzg1NkJFRjM3RAA="}]}
2025-07-03 23:25:33,172 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjJERUY0NUQ0Mzg1NkJFRjM3RAA='}]}
2025-07-03 23:25:33,173 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:34,098 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:34,496 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:34,678 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:35,802 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'ai_bulk_order_direct'}
2025-07-03 23:25:35,808 - handlers.base_handler - INFO - GreetingHandler: Handling message 'ai_bulk_order_direct' in greeting state for session 2348055614455.
2025-07-03 23:25:35,808 - handlers.base_handler - INFO - Session 2348055614455 redirecting to AIHandler for AI Bulk Order (Let Lola Order).
2025-07-03 23:25:35,809 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'ai_handler' with message 'start_ai_bulk_order'.
2025-07-03 23:25:35,809 - handlers.base_handler - INFO - AIHandler: Handling message 'start_ai_bulk_order' in AI bulk order state for session 2348055614455. Original: 'ai_bulk_order_direct'
2025-07-03 23:25:35,810 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'image', 'image': {'link': 'https://test.mackennytutors.com/wp-content/uploads/2025/06/ganador.jpg', 'caption': 'Our Delicious Menu!'}}
2025-07-03 23:25:37,052 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjI2NUZCQkQ3MURCNEI5RDJBQwA="}]}
2025-07-03 23:25:37,053 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': "Hi, I'm Lola from Ganador \n\nTake a look at the menu and type in your order\n\n"}}
2025-07-03 23:25:38,085 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjAzQjFBMUE0NDAyRUEzRTI5RgA="}]}
2025-07-03 23:25:38,086 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjAzQjFBMUE0NDAyRUEzRTI5RgA='}]}
2025-07-03 23:25:38,087 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:38,633 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:38] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:39,112 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:39,116 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:39,142 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:39,281 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:39,286 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:39] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:44,108 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:44] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:50,824 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Jellof rice'}
2025-07-03 23:25:50,828 - handlers.base_handler - INFO - AIHandler: Handling message 'jellof rice' in AI bulk order state for session 2348055614455. Original: 'Jellof rice'
2025-07-03 23:25:53,372 - httpx - INFO - HTTP Request: POST https://insig-maduyfup-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-35-turbo/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
2025-07-03 23:25:54,187 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjIzODJGQkREQjBGN0YwQTQyMwA="}]}
2025-07-03 23:25:54,187 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjIzODJGQkREQjBGN0YwQTQyMwA='}]}
2025-07-03 23:25:54,188 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:55,002 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:55] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:55,147 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:55] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:55,393 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:55] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:57,136 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'confirm_ai_order'}
2025-07-03 23:25:57,139 - handlers.base_handler - INFO - AI order confirmed. Cart: {'Jollof Rice': {'item_id': 1, 'quantity': 1, 'price': 2500.0, 'total_price': 2500.0, 'variations': {}}}. Redirecting to order handler.
2025-07-03 23:25:57,140 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'order_handler' with message 'process_final_order'.
2025-07-03 23:25:57,140 - handlers.order_handler - INFO - AI initiated order processing for session 2348055614455.
2025-07-03 23:25:57,140 - handlers.order_handler - INFO - Address set, proceeding to confirm order for AI-initiated session 2348055614455.
2025-07-03 23:25:58,016 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkUwMjY2NDMyQjU5OEE0RDMwMwA="}]}
2025-07-03 23:25:58,046 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkUwMjY2NDMyQjU5OEE0RDMwMwA='}]}
2025-07-03 23:25:58,047 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:58] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:59,118 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:59,121 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:25:59,124 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:25:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:26:00,990 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'final_confirm'}
2025-07-03 23:26:00,993 - handlers.message_processor - ERROR - Error in message routing for handler 'order_handler', state 'confirm_order' for session 2348055614455: 'Config' object has no attribute 'MERCHANT_ID'
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\handlers\message_processor.py", line 236, in _route_to_handler
    response = self.order_handler.handle_confirm_order_state(state, message, session_id)
  File "C:\Users\zigam\Documents\Lola\app\handlers\order_handler.py", line 438, in handle_confirm_order_state
    "merchant_id": self.config.MERCHANT_ID or "default_merchant",
                   ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Config' object has no attribute 'MERCHANT_ID'
2025-07-03 23:26:02,012 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjg4NDdDNTNFRjA0N0U3RjNBMwA="}]}
2025-07-03 23:26:02,025 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjg4NDdDNTNFRjA0N0U3RjNBMwA='}]}
2025-07-03 23:26:02,025 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:26:02] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:26:02,742 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:26:02] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:26:02,902 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:26:02] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:26:03,075 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:26:03] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:27:33,329 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:27:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:31:55,844 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 23:31:57,384 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:31:59,061 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:31:59,256 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:32:00,963 - handlers.product_sync_handler - INFO - Successfully synced 17 products to data\products.json
2025-07-03 23:32:01,244 - app - INFO - Initial product sync successful on startup
2025-07-03 23:32:01,245 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:32:03,223 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:32:03,423 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:32:03,424 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 23:32:03,424 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 23:32:03,426 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 23:32:03,427 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 23:32:03,427 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:32:03,427 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 23:32:04,079 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 23:32:04,079 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 23:32:04,080 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 23:32:04,080 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:32:04,099 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 23:32:04,099 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 23:32:11,346 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Hello'}
2025-07-03 23:32:11,347 - utils.session_manager - INFO - New session 2348055614455 initialized.
2025-07-03 23:32:14,634 - handlers.base_handler - INFO - Session 2348055614455 greeted user 'Victor'.
2025-07-03 23:32:15,699 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjYyNTFGQjlFNTc4RkU2NEUzQwA="}]}
2025-07-03 23:32:15,699 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjYyNTFGQjlFNTc4RkU2NEUzQwA='}]}
2025-07-03 23:32:15,700 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:15] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:16,404 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:16] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:16,519 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:16] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:16,654 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:16] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:18,541 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'ai_bulk_order_direct'}
2025-07-03 23:32:18,545 - handlers.base_handler - INFO - GreetingHandler: Handling message 'ai_bulk_order_direct' in greeting state for session 2348055614455.
2025-07-03 23:32:18,545 - handlers.base_handler - INFO - Session 2348055614455 redirecting to AIHandler for AI Bulk Order (Let Lola Order).
2025-07-03 23:32:18,545 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'ai_handler' with message 'start_ai_bulk_order'.
2025-07-03 23:32:18,546 - handlers.base_handler - INFO - AIHandler: Handling message 'start_ai_bulk_order' in AI bulk order state for session 2348055614455. Original: 'ai_bulk_order_direct'
2025-07-03 23:32:18,546 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'image', 'image': {'link': 'https://test.mackennytutors.com/wp-content/uploads/2025/06/ganador.jpg', 'caption': 'Our Delicious Menu!'}}
2025-07-03 23:32:20,535 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjQ1Rjg3NDcwQ0IwNDlFQjBBOAA="}]}
2025-07-03 23:32:20,536 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': "Hi, I'm Lola from Ganador \n\nTake a look at the menu and type in your order\n\n"}}
2025-07-03 23:32:21,654 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjJCQTlEQzE0M0UzRjdBNTJFOQA="}]}
2025-07-03 23:32:21,655 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjJCQTlEQzE0M0UzRjdBNTJFOQA='}]}
2025-07-03 23:32:21,655 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:21,702 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:21,858 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:21,864 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:22,630 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:22,888 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:22,935 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:25,869 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Jellof rice'}
2025-07-03 23:32:25,873 - handlers.base_handler - INFO - AIHandler: Handling message 'jellof rice' in AI bulk order state for session 2348055614455. Original: 'Jellof rice'
2025-07-03 23:32:29,314 - httpx - INFO - HTTP Request: POST https://insig-maduyfup-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-35-turbo/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
2025-07-03 23:32:30,466 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkExMjM3Rjg2RURBNTdFNTBEQQA="}]}
2025-07-03 23:32:30,468 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkExMjM3Rjg2RURBNTdFNTBEQQA='}]}
2025-07-03 23:32:30,468 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:30] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:31,206 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:31] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:31,241 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:31] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:31,472 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:31] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:32,490 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'confirm_ai_order'}
2025-07-03 23:32:32,493 - handlers.base_handler - INFO - AI order confirmed. Cart: {'Jollof Rice': {'item_id': '1', 'quantity': 1, 'price': 2500.0, 'total_price': 2500.0, 'variations': {}}}. Redirecting to order handler.
2025-07-03 23:32:32,493 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'order_handler' with message 'process_final_order'.
2025-07-03 23:32:32,494 - handlers.order_handler - INFO - AI initiated order processing for session 2348055614455.
2025-07-03 23:32:32,494 - handlers.order_handler - INFO - Address set, proceeding to confirm order for AI-initiated session 2348055614455.
2025-07-03 23:32:33,676 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjdDNzNEQ0Y4NjE4ODE0NTM0RQA="}]}
2025-07-03 23:32:33,694 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjdDNzNEQ0Y4NjE4ODE0NTM0RQA='}]}
2025-07-03 23:32:33,694 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:34,446 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:34,520 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:34,694 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:36,347 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'final_confirm'}
2025-07-03 23:32:37,595 - utils.data_manager - ERROR - Unexpected error while saving order ORDER_20250703_233236_78821979: 'Config' object has no attribute 'MERCHANT_ID'
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 174, in save_user_order
    self.config.MERCHANT_ID or "default_merchant",
    ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Config' object has no attribute 'MERCHANT_ID'
2025-07-03 23:32:37,616 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'payment_handler' with message 'initiate_payment'.
2025-07-03 23:32:37,616 - handlers.base_handler - INFO - Handling payment processing for session 2348055614455, message: initiate_payment
2025-07-03 23:32:37,616 - handlers.base_handler - INFO - Creating payment link for session 2348055614455
2025-07-03 23:32:38,836 - utils.data_manager - ERROR - Unexpected error while saving order ORDER-20250703233237-3936: 'Config' object has no attribute 'MERCHANT_ID'
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 174, in save_user_order
    self.config.MERCHANT_ID or "default_merchant",
    ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Config' object has no attribute 'MERCHANT_ID'
2025-07-03 23:32:38,838 - services.payment_service - INFO - Attempting to create payment link for reference: PAY-ORDER-20250703233237-3936 with amount: 250000.0, email: victor4455@foodorder.com
2025-07-03 23:32:39,711 - services.payment_service - INFO - Payment link created for Victor Victor (2348055614455), URL: https://checkout.paystack.com/hoa7ht43oa9cmnc
2025-07-03 23:32:39,712 - handlers.base_handler - INFO - Starting payment monitoring for order ORDER-20250703233237-3936, reference PAY-ORDER-20250703233237-3936
2025-07-03 23:32:39,713 - services.payment_service - INFO - Attempting to verify payment for reference: PAY-ORDER-20250703233237-3936
2025-07-03 23:32:40,334 - services.payment_service - WARNING - Payment not successful for reference PAY-ORDER-20250703233237-3936. Paystack status: abandoned. Response: {'status': True, 'message': 'Verification successful', 'data': {'id': 5114518331, 'domain': 'test', 'status': 'abandoned', 'reference': 'PAY-ORDER-20250703233237-3936', 'receipt_number': None, 'amount': 250000, 'message': None, 'gateway_response': 'The transaction was not completed', 'paid_at': None, 'created_at': '2025-07-03T22:32:40.000Z', 'channel': 'card', 'currency': 'NGN', 'ip_address': '102.89.69.193, 172.71.178.103, 172.31.63.81', 'metadata': {'customer_name': 'Victor', 'customer_phone': '2348055614455', 'first_name': 'Victor', 'last_name': 'Victor', 'order_id': 'ORDER-20250703233237-3936', 'delivery_address': 'Howson Wright'}, 'log': None, 'fees': None, 'fees_split': None, 'authorization': {}, 'customer': {'id': 289584095, 'first_name': None, 'last_name': None, 'email': 'victor4455@foodorder.com', 'customer_code': 'CUS_zv03jf9h0rpamu3', 'phone': None, 'metadata': None, 'risk_action': 'default', 'international_format_phone': None}, 'plan': None, 'split': {}, 'order_id': None, 'paidAt': None, 'createdAt': '2025-07-03T22:32:40.000Z', 'requested_amount': 250000, 'pos_transaction_data': None, 'source': None, 'fees_breakdown': None, 'connect': None, 'transaction_date': '2025-07-03T22:32:40.000Z', 'plan_object': {}, 'subaccount': {}}}
2025-07-03 23:32:40,338 - handlers.base_handler - INFO - Payment not yet verified for order ORDER-20250703233237-3936, attempt 1/15
2025-07-03 23:32:40,338 - handlers.base_handler - INFO - Payment link created successfully for order ORDER-20250703233237-3936
2025-07-03 23:32:41,228 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkEwNkM5MkI4NThEODYwQzg2MwA="}]}
2025-07-03 23:32:41,243 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkEwNkM5MkI4NThEODYwQzg2MwA='}]}
2025-07-03 23:32:41,245 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:42,152 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:42,480 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:32:42,490 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:32:42] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:33:29,728 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Paid'}
2025-07-03 23:33:29,732 - handlers.base_handler - INFO - Received 'paid' command for session 2348055614455, attempting manual verification for ref: PAY-ORDER-20250703233237-3936
2025-07-03 23:33:29,733 - services.payment_service - INFO - Attempting to verify payment for reference: PAY-ORDER-20250703233237-3936
2025-07-03 23:33:30,348 - services.payment_service - INFO - Payment verified successfully for reference PAY-ORDER-20250703233237-3936. Status: success
2025-07-03 23:33:32,337 - handlers.base_handler - ERROR - Order not found for payment reference PAY-ORDER-20250703233237-3936 during manual verification.
2025-07-03 23:33:33,182 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjYxRTdENTZFNEE2MDY1RjVBMgA="}]}
2025-07-03 23:33:33,197 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjYxRTdENTZFNEE2MDY1RjVBMgA='}]}
2025-07-03 23:33:33,197 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:33:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:33:34,141 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:33:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:33:34,167 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:33:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:33:34,490 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:33:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:33:40,347 - services.payment_service - INFO - Attempting to verify payment for reference: PAY-ORDER-20250703233237-3936
2025-07-03 23:33:41,185 - services.payment_service - INFO - Payment verified successfully for reference PAY-ORDER-20250703233237-3936. Status: success
2025-07-03 23:33:41,186 - handlers.base_handler - INFO - Payment verified for order ORDER-20250703233237-3936 on attempt 2
2025-07-03 23:33:41,187 - services.payment_service - INFO - Attempting to verify payment for reference: PAY-ORDER-20250703233237-3936
2025-07-03 23:33:41,775 - services.payment_service - INFO - Payment verified successfully for reference PAY-ORDER-20250703233237-3936. Status: success
2025-07-03 23:33:44,028 - handlers.base_handler - ERROR - Order data not found for payment reference PAY-ORDER-20250703233237-3936 during auto-payment handling.
2025-07-03 23:39:02,334 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 23:39:03,683 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:39:08,724 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:39:09,021 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:39:10,722 - handlers.product_sync_handler - INFO - Successfully synced 17 products to data\products.json
2025-07-03 23:39:10,922 - app - INFO - Initial product sync successful on startup
2025-07-03 23:39:10,923 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:39:13,697 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:39:13,929 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:39:13,929 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 23:39:13,929 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 23:39:13,930 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 23:39:13,930 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 23:39:13,931 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:39:13,931 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 23:39:14,322 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 23:39:14,322 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 23:39:14,322 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 23:39:14,323 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:39:14,334 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 23:39:14,334 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 23:39:17,542 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Hello'}
2025-07-03 23:39:17,542 - utils.session_manager - INFO - New session 2348055614455 initialized.
2025-07-03 23:39:19,981 - handlers.base_handler - INFO - Session 2348055614455: New user or missing details. Initiating onboarding.
2025-07-03 23:39:19,982 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': 'Hello victor, welcome to Lola!\nPlease enter your preferred name.'}}
2025-07-03 23:39:21,370 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjE3NzJEQTM1NEEyNzkzMjUzNQA="}]}
2025-07-03 23:39:21,370 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjE3NzJEQTM1NEEyNzkzMjUzNQA='}]}
2025-07-03 23:39:21,371 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:39:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:39:22,136 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:39:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:39:22,588 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:39:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:39:22,720 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:39:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:39:31,717 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Victor Makinde'}
2025-07-03 23:39:31,721 - handlers.message_processor - WARNING - No specific handler or state match for handler 'greeting_handler', state 'collect_preferred_name', message 'victor makinde' for session 2348055614455. Resetting to greeting.
2025-07-03 23:39:31,721 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': "I'm sorry, I didn't quite understand that. Let's get back to the main menu."}}
2025-07-03 23:39:32,483 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkQ1MzU5RUEzOTExRjIyN0RDNAA="}]}
2025-07-03 23:39:33,364 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkEzQzFGNUFEM0JCNkRGMDJEMwA="}]}
2025-07-03 23:39:33,365 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkEzQzFGNUFEM0JCNkRGMDJEMwA='}]}
2025-07-03 23:39:33,365 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:39:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:39:33,407 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:39:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:39:33,556 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:39:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:39:33,789 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:39:33] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:39:34,273 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:39:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:39:34,383 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:39:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:39:34,647 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:39:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:43:53,807 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 23:43:55,070 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:43:56,774 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:43:57,156 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:43:58,901 - handlers.product_sync_handler - INFO - Successfully synced 17 products to data\products.json
2025-07-03 23:43:59,101 - app - INFO - Initial product sync successful on startup
2025-07-03 23:43:59,101 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:44:00,835 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:44:01,047 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:44:01,048 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 23:44:01,048 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 23:44:01,049 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 23:44:01,049 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 23:44:01,049 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:44:01,050 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 23:44:01,436 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 23:44:01,436 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 23:44:01,437 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 23:44:01,437 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:44:01,449 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 23:44:01,449 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 23:44:04,412 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Hello'}
2025-07-03 23:44:04,412 - utils.session_manager - INFO - New session 2348055614455 initialized.
2025-07-03 23:44:06,367 - handlers.base_handler - INFO - Session 2348055614455: New user or missing details. Initiating onboarding.
2025-07-03 23:44:06,367 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': 'Hello victor, welcome to Lola!\nPlease enter your preferred name.'}}
2025-07-03 23:44:07,452 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjQyQjBFMEVBRjBDMDREQTQyRQA="}]}
2025-07-03 23:44:07,453 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjQyQjBFMEVBRjBDMDREQTQyRQA='}]}
2025-07-03 23:44:07,454 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:08,266 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:08,625 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:08,694 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:17,083 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Victor Makinde'}
2025-07-03 23:44:17,086 - handlers.base_handler - INFO - Session 2348055614455: Preferred name received: 'victor makinde'.
2025-07-03 23:44:20,926 - utils.data_manager - INFO - User details for 2348055614455 saved to database
2025-07-03 23:44:20,927 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': 'Thanks, victor makinde! Now, please enter your delivery address.'}}
2025-07-03 23:44:22,197 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjQ2QUZCODEwQTIxRTA3NUM4NwA="}]}
2025-07-03 23:44:22,197 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjQ2QUZCODEwQTIxRTA3NUM4NwA='}]}
2025-07-03 23:44:22,198 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:23,091 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:23,481 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:23,618 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:23] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:31,329 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Howson Wright'}
2025-07-03 23:44:31,334 - handlers.base_handler - INFO - Session 2348055614455: Delivery address received: 'howson wright'.
2025-07-03 23:44:33,430 - utils.data_manager - INFO - User details for 2348055614455 saved to database
2025-07-03 23:44:33,431 - handlers.base_handler - INFO - Session 2348055614455 onboarding complete. Greeting victor makinde.
2025-07-03 23:44:34,207 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjRGNTNDNTU3OThFMzYxN0ZDOAA="}]}
2025-07-03 23:44:34,207 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjRGNTNDNTU3OThFMzYxN0ZDOAA='}]}
2025-07-03 23:44:34,208 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:34] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:35,291 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:35,293 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:35,295 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:35] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:38,196 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'ai_bulk_order_direct'}
2025-07-03 23:44:38,199 - handlers.base_handler - INFO - GreetingHandler: Handling message 'ai_bulk_order_direct' in greeting state for session 2348055614455.
2025-07-03 23:44:38,200 - handlers.base_handler - INFO - Session 2348055614455 redirecting to AIHandler for AI Bulk Order (Let Lola Order).
2025-07-03 23:44:38,200 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'ai_handler' with message 'start_ai_bulk_order'.
2025-07-03 23:44:38,200 - handlers.base_handler - INFO - AIHandler: Handling message 'start_ai_bulk_order' in AI bulk order state for session 2348055614455. Original: 'ai_bulk_order_direct'
2025-07-03 23:44:38,201 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'image', 'image': {'link': 'https://test.mackennytutors.com/wp-content/uploads/2025/06/ganador.jpg', 'caption': 'Our Delicious Menu!'}}
2025-07-03 23:44:39,343 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkNCQ0RFMzRGNUI0RjYxNzlCQwA="}]}
2025-07-03 23:44:39,343 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': "Hi, I'm Lola from Ganador \n\nTake a look at the menu and type in your order\n\n"}}
2025-07-03 23:44:40,081 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjA0NzQ2NzBFMzFENjJFRUZGQQA="}]}
2025-07-03 23:44:40,082 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjA0NzQ2NzBFMzFENjJFRUZGQQA='}]}
2025-07-03 23:44:40,083 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:40] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:40,797 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:40] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:41,070 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:41,146 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:41,340 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:41,408 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:41,817 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:41] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:45,239 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Jellof rice'}
2025-07-03 23:44:45,243 - handlers.base_handler - INFO - AIHandler: Handling message 'jellof rice' in AI bulk order state for session 2348055614455. Original: 'Jellof rice'
2025-07-03 23:44:47,725 - httpx - INFO - HTTP Request: POST https://insig-maduyfup-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-35-turbo/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
2025-07-03 23:44:48,456 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjJDRDk1NTZFQTY5NEYwMkNDQQA="}]}
2025-07-03 23:44:48,457 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjJDRDk1NTZFQTY5NEYwMkNDQQA='}]}
2025-07-03 23:44:48,457 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:48] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:49,369 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:49,559 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:49,681 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:50,618 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'confirm_ai_order'}
2025-07-03 23:44:50,621 - handlers.base_handler - INFO - AI order confirmed. Cart: {'Jollof Rice': {'item_id': '1', 'quantity': 1, 'price': 2500.0, 'total_price': 2500.0, 'variations': {}}}. Redirecting to order handler.
2025-07-03 23:44:50,622 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'order_handler' with message 'process_final_order'.
2025-07-03 23:44:50,622 - handlers.order_handler - INFO - AI initiated order processing for session 2348055614455.
2025-07-03 23:44:50,623 - handlers.order_handler - INFO - Address set, proceeding to confirm order for AI-initiated session 2348055614455.
2025-07-03 23:44:51,519 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjE1QUQ4NjFDREQ1QjJDMEQ0MwA="}]}
2025-07-03 23:44:51,544 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjE1QUQ4NjFDREQ1QjJDMEQ0MwA='}]}
2025-07-03 23:44:51,545 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:51] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:52,339 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:52] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:52,509 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:52] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:44:53,883 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'final_confirm'}
2025-07-03 23:44:55,334 - utils.data_manager - ERROR - Unexpected error while saving order ORDER_20250703_234453_03205056: 'Config' object has no attribute 'MERCHANT_ID'
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 174, in save_user_order
    self.config.MERCHANT_ID or "default_merchant",
    ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Config' object has no attribute 'MERCHANT_ID'
2025-07-03 23:44:55,370 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'payment_handler' with message 'initiate_payment'.
2025-07-03 23:44:55,370 - handlers.base_handler - INFO - Handling payment processing for session 2348055614455, message: initiate_payment
2025-07-03 23:44:55,370 - handlers.base_handler - INFO - Creating payment link for session 2348055614455
2025-07-03 23:44:56,592 - utils.data_manager - ERROR - Unexpected error while saving order ORDER-20250703234455-1544: 'Config' object has no attribute 'MERCHANT_ID'
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 174, in save_user_order
    self.config.MERCHANT_ID or "default_merchant",
    ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Config' object has no attribute 'MERCHANT_ID'
2025-07-03 23:44:56,594 - services.payment_service - INFO - Attempting to create payment link for reference: PAY-ORDER-20250703234455-1544 with amount: 250000.0, email: victor4455@foodorder.com
2025-07-03 23:44:57,724 - services.payment_service - INFO - Payment link created for victor makinde (2348055614455), URL: https://checkout.paystack.com/9wsnkv2ly60dgv1
2025-07-03 23:44:57,731 - handlers.base_handler - INFO - Starting payment monitoring for order ORDER-20250703234455-1544, reference PAY-ORDER-20250703234455-1544
2025-07-03 23:44:57,731 - services.payment_service - INFO - Attempting to verify payment for reference: PAY-ORDER-20250703234455-1544
2025-07-03 23:44:58,529 - services.payment_service - WARNING - Payment not successful for reference PAY-ORDER-20250703234455-1544. Paystack status: abandoned. Response: {'status': True, 'message': 'Verification successful', 'data': {'id': 5114529534, 'domain': 'test', 'status': 'abandoned', 'reference': 'PAY-ORDER-20250703234455-1544', 'receipt_number': None, 'amount': 250000, 'message': None, 'gateway_response': 'The transaction was not completed', 'paid_at': None, 'created_at': '2025-07-03T22:44:58.000Z', 'channel': 'card', 'currency': 'NGN', 'ip_address': '102.89.69.193, 172.69.195.27, 172.31.68.120', 'metadata': {'customer_name': 'victor makinde', 'customer_phone': '2348055614455', 'first_name': 'victor', 'last_name': 'makinde', 'order_id': 'ORDER-20250703234455-1544', 'delivery_address': 'Howson Wright'}, 'log': None, 'fees': None, 'fees_split': None, 'authorization': {}, 'customer': {'id': 289584095, 'first_name': None, 'last_name': None, 'email': 'victor4455@foodorder.com', 'customer_code': 'CUS_zv03jf9h0rpamu3', 'phone': None, 'metadata': None, 'risk_action': 'default', 'international_format_phone': None}, 'plan': None, 'split': {}, 'order_id': None, 'paidAt': None, 'createdAt': '2025-07-03T22:44:58.000Z', 'requested_amount': 250000, 'pos_transaction_data': None, 'source': None, 'fees_breakdown': None, 'connect': None, 'transaction_date': '2025-07-03T22:44:58.000Z', 'plan_object': {}, 'subaccount': {}}}
2025-07-03 23:44:58,530 - handlers.base_handler - INFO - Payment not yet verified for order ORDER-20250703234455-1544, attempt 1/15
2025-07-03 23:44:58,531 - handlers.base_handler - INFO - Payment link created successfully for order ORDER-20250703234455-1544
2025-07-03 23:44:59,321 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjNBODg5NUExREEwREZFMTA5MgA="}]}
2025-07-03 23:44:59,337 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjNBODg5NUExREEwREZFMTA5MgA='}]}
2025-07-03 23:44:59,338 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:44:59] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:45:00,320 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:45:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:45:00,443 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:45:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:45:00,445 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:45:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:45:17,752 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:45:17] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:45:18,651 - handlers.webhook_handler - INFO - Processing message from 2348028373794 (User: toplargemakeover): {'type': 'text', 'text': 'Done'}
2025-07-03 23:45:18,651 - utils.session_manager - INFO - New session 2348028373794 initialized.
2025-07-03 23:45:20,498 - handlers.base_handler - INFO - Session 2348028373794: New user or missing details. Initiating onboarding.
2025-07-03 23:45:20,499 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348028373794', 'type': 'text', 'text': {'body': 'Hello Guest, welcome to Lola!\nPlease enter your preferred name.'}}
2025-07-03 23:45:21,367 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348028373794","wa_id":"2348028373794"}],"messages":[{"id":"wamid.HBgNMjM0ODAyODM3Mzc5NBUCABEYEkYyNDE4RUYwOUNDN0FCRUJFOAA="}]}
2025-07-03 23:45:21,368 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348028373794', 'wa_id': '2348028373794'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAyODM3Mzc5NBUCABEYEkYyNDE4RUYwOUNDN0FCRUJFOAA='}]}
2025-07-03 23:45:21,368 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:45:21] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:45:22,143 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:45:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:45:58,535 - services.payment_service - INFO - Attempting to verify payment for reference: PAY-ORDER-20250703234455-1544
2025-07-03 23:45:59,205 - services.payment_service - WARNING - Payment not successful for reference PAY-ORDER-20250703234455-1544. Paystack status: abandoned. Response: {'status': True, 'message': 'Verification successful', 'data': {'id': 5114529534, 'domain': 'test', 'status': 'abandoned', 'reference': 'PAY-ORDER-20250703234455-1544', 'receipt_number': None, 'amount': 250000, 'message': None, 'gateway_response': 'The transaction was not completed', 'paid_at': None, 'created_at': '2025-07-03T22:44:58.000Z', 'channel': 'card', 'currency': 'NGN', 'ip_address': '102.89.69.193, 172.69.195.27, 172.31.68.120', 'metadata': {'customer_name': 'victor makinde', 'customer_phone': '2348055614455', 'first_name': 'victor', 'last_name': 'makinde', 'order_id': 'ORDER-20250703234455-1544', 'delivery_address': 'Howson Wright'}, 'log': None, 'fees': None, 'fees_split': None, 'authorization': {}, 'customer': {'id': 289584095, 'first_name': None, 'last_name': None, 'email': 'victor4455@foodorder.com', 'customer_code': 'CUS_zv03jf9h0rpamu3', 'phone': None, 'metadata': None, 'risk_action': 'default', 'international_format_phone': None}, 'plan': None, 'split': {}, 'order_id': None, 'paidAt': None, 'createdAt': '2025-07-03T22:44:58.000Z', 'requested_amount': 250000, 'pos_transaction_data': None, 'source': None, 'fees_breakdown': None, 'connect': None, 'transaction_date': '2025-07-03T22:44:58.000Z', 'plan_object': {}, 'subaccount': {}}}
2025-07-03 23:45:59,206 - handlers.base_handler - INFO - Payment not yet verified for order ORDER-20250703234455-1544, attempt 2/15
2025-07-03 23:46:52,003 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:46:52] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:46:59,215 - services.payment_service - INFO - Attempting to verify payment for reference: PAY-ORDER-20250703234455-1544
2025-07-03 23:46:59,870 - services.payment_service - WARNING - Payment not successful for reference PAY-ORDER-20250703234455-1544. Paystack status: abandoned. Response: {'status': True, 'message': 'Verification successful', 'data': {'id': 5114529534, 'domain': 'test', 'status': 'abandoned', 'reference': 'PAY-ORDER-20250703234455-1544', 'receipt_number': None, 'amount': 250000, 'message': None, 'gateway_response': 'The transaction was not completed', 'paid_at': None, 'created_at': '2025-07-03T22:44:58.000Z', 'channel': 'card', 'currency': 'NGN', 'ip_address': '102.89.69.193, 172.69.195.27, 172.31.68.120', 'metadata': {'customer_name': 'victor makinde', 'customer_phone': '2348055614455', 'first_name': 'victor', 'last_name': 'makinde', 'order_id': 'ORDER-20250703234455-1544', 'delivery_address': 'Howson Wright'}, 'log': None, 'fees': None, 'fees_split': None, 'authorization': {}, 'customer': {'id': 289584095, 'first_name': None, 'last_name': None, 'email': 'victor4455@foodorder.com', 'customer_code': 'CUS_zv03jf9h0rpamu3', 'phone': None, 'metadata': None, 'risk_action': 'default', 'international_format_phone': None}, 'plan': None, 'split': {}, 'order_id': None, 'paidAt': None, 'createdAt': '2025-07-03T22:44:58.000Z', 'requested_amount': 250000, 'pos_transaction_data': None, 'source': None, 'fees_breakdown': None, 'connect': None, 'transaction_date': '2025-07-03T22:44:58.000Z', 'plan_object': {}, 'subaccount': {}}}
2025-07-03 23:46:59,870 - handlers.base_handler - INFO - Payment not yet verified for order ORDER-20250703234455-1544, attempt 3/15
2025-07-03 23:47:00,244 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:47:00] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:47:04,584 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Paid'}
2025-07-03 23:47:04,587 - handlers.base_handler - INFO - Received 'paid' command for session 2348055614455, attempting manual verification for ref: PAY-ORDER-20250703234455-1544
2025-07-03 23:47:04,587 - services.payment_service - INFO - Attempting to verify payment for reference: PAY-ORDER-20250703234455-1544
2025-07-03 23:47:05,208 - services.payment_service - WARNING - Payment not successful for reference PAY-ORDER-20250703234455-1544. Paystack status: abandoned. Response: {'status': True, 'message': 'Verification successful', 'data': {'id': 5114529534, 'domain': 'test', 'status': 'abandoned', 'reference': 'PAY-ORDER-20250703234455-1544', 'receipt_number': None, 'amount': 250000, 'message': None, 'gateway_response': 'The transaction was not completed', 'paid_at': None, 'created_at': '2025-07-03T22:44:58.000Z', 'channel': 'card', 'currency': 'NGN', 'ip_address': '102.89.69.193, 172.69.195.27, 172.31.68.120', 'metadata': {'customer_name': 'victor makinde', 'customer_phone': '2348055614455', 'first_name': 'victor', 'last_name': 'makinde', 'order_id': 'ORDER-20250703234455-1544', 'delivery_address': 'Howson Wright'}, 'log': None, 'fees': None, 'fees_split': None, 'authorization': {}, 'customer': {'id': 289584095, 'first_name': None, 'last_name': None, 'email': 'victor4455@foodorder.com', 'customer_code': 'CUS_zv03jf9h0rpamu3', 'phone': None, 'metadata': None, 'risk_action': 'default', 'international_format_phone': None}, 'plan': None, 'split': {}, 'order_id': None, 'paidAt': None, 'createdAt': '2025-07-03T22:44:58.000Z', 'requested_amount': 250000, 'pos_transaction_data': None, 'source': None, 'fees_breakdown': None, 'connect': None, 'transaction_date': '2025-07-03T22:44:58.000Z', 'plan_object': {}, 'subaccount': {}}}
2025-07-03 23:47:07,301 - handlers.base_handler - INFO - Manual payment verification failed for reference PAY-ORDER-20250703234455-1544. Paystack status: abandoned
2025-07-03 23:47:08,205 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkU2NDVBMjEwNTQyMzJEQURCQQA="}]}
2025-07-03 23:47:08,219 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkU2NDVBMjEwNTQyMzJEQURCQQA='}]}
2025-07-03 23:47:08,219 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:47:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:47:09,056 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:47:09] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:47:09,133 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:47:09] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:47:09,336 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:47:09] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:47:22,909 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Paid'}
2025-07-03 23:47:22,912 - handlers.base_handler - INFO - Received 'paid' command for session 2348055614455, attempting manual verification for ref: PAY-ORDER-20250703234455-1544
2025-07-03 23:47:22,913 - services.payment_service - INFO - Attempting to verify payment for reference: PAY-ORDER-20250703234455-1544
2025-07-03 23:47:23,501 - services.payment_service - INFO - Payment verified successfully for reference PAY-ORDER-20250703234455-1544. Status: success
2025-07-03 23:47:25,466 - handlers.base_handler - ERROR - Order not found for payment reference PAY-ORDER-20250703234455-1544 during manual verification.
2025-07-03 23:47:26,406 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjlFNjlFNkM1MDg5NjlGM0Q3RAA="}]}
2025-07-03 23:47:26,421 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjlFNjlFNkM1MDg5NjlGM0Q3RAA='}]}
2025-07-03 23:47:26,421 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:47:26] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:47:27,558 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:47:27] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:47:27,898 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:47:27] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:47:27,899 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:47:27] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:47:59,879 - services.payment_service - INFO - Attempting to verify payment for reference: PAY-ORDER-20250703234455-1544
2025-07-03 23:48:00,529 - services.payment_service - INFO - Payment verified successfully for reference PAY-ORDER-20250703234455-1544. Status: success
2025-07-03 23:48:00,530 - handlers.base_handler - INFO - Payment verified for order ORDER-20250703234455-1544 on attempt 4
2025-07-03 23:48:00,530 - services.payment_service - INFO - Attempting to verify payment for reference: PAY-ORDER-20250703234455-1544
2025-07-03 23:48:01,190 - services.payment_service - INFO - Payment verified successfully for reference PAY-ORDER-20250703234455-1544. Status: success
2025-07-03 23:48:03,307 - handlers.base_handler - ERROR - Order data not found for payment reference PAY-ORDER-20250703234455-1544 during auto-payment handling.
2025-07-03 23:48:22,505 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:48:22] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:52:46,804 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 23:52:48,009 - __main__ - ERROR - Unexpected error: invalid syntax (order_handler.py, line 236)
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Lola\app\app.py", line 7, in <module>
    from handlers.webhook_handler import WebhookHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\webhook_handler.py", line 8, in <module>
    from handlers.message_processor import MessageProcessor
  File "C:\Users\zigam\Documents\Lola\app\handlers\message_processor.py", line 8, in <module>
    from handlers.order_handler import OrderHandler
  File "C:\Users\zigam\Documents\Lola\app\handlers\order_handler.py", line 236
    user_name|
              ^
SyntaxError: invalid syntax
2025-07-03 23:53:28,673 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 23:53:30,121 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:53:34,914 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:53:35,111 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:53:36,872 - handlers.product_sync_handler - INFO - Successfully synced 17 products to data\products.json
2025-07-03 23:53:37,263 - app - INFO - Initial product sync successful on startup
2025-07-03 23:53:37,263 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-03 23:53:39,504 - utils.data_manager - INFO - Successfully loaded 4 user details from database
2025-07-03 23:53:39,703 - services.payment_service - INFO - PaymentService initialized
2025-07-03 23:53:39,704 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-03 23:53:39,704 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-03 23:53:39,717 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-03 23:53:39,717 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-03 23:53:39,718 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:53:39,718 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-03 23:53:40,178 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-03 23:53:40,178 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-03 23:53:40,179 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-03 23:53:40,179 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-03 23:53:40,208 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-03 23:53:40,208 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-03 23:53:46,248 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Hello'}
2025-07-03 23:53:46,248 - utils.session_manager - INFO - New session 2348055614455 initialized.
2025-07-03 23:53:48,314 - handlers.base_handler - INFO - Session 2348055614455 greeted returning user 'victor makinde'.
2025-07-03 23:53:49,164 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjZERkNGRDMzNEIxQjlFQzRFNQA="}]}
2025-07-03 23:53:49,175 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjZERkNGRDMzNEIxQjlFQzRFNQA='}]}
2025-07-03 23:53:49,176 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:53:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:53:50,053 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:53:50] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:53:50,350 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:53:50] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:53:50,472 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:53:50] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:53:54,307 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:53:54] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:53:54,599 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'ai_bulk_order_direct'}
2025-07-03 23:53:54,602 - handlers.base_handler - INFO - GreetingHandler: Handling message 'ai_bulk_order_direct' in greeting state for session 2348055614455.
2025-07-03 23:53:54,603 - handlers.base_handler - INFO - Session 2348055614455 redirecting to AIHandler for AI Bulk Order (Let Lola Order).
2025-07-03 23:53:54,603 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'ai_handler' with message 'start_ai_bulk_order'.
2025-07-03 23:53:54,603 - handlers.base_handler - INFO - AIHandler: Handling message 'start_ai_bulk_order' in AI bulk order state for session 2348055614455. Original: 'ai_bulk_order_direct'
2025-07-03 23:53:54,604 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'image', 'image': {'link': 'https://test.mackennytutors.com/wp-content/uploads/2025/06/ganador.jpg', 'caption': 'Our Delicious Menu!'}}
2025-07-03 23:53:55,046 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:53:55] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:53:55,565 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkJFMjJBRTMwNTkxMkQ2NjEzOAA="}]}
2025-07-03 23:53:55,565 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348055614455', 'type': 'text', 'text': {'body': "Hi, I'm Lola from Ganador \n\nTake a look at the menu and type in your order\n\n"}}
2025-07-03 23:53:56,348 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjA4OEVFNzZFNjFCQUNBMTZBMwA="}]}
2025-07-03 23:53:56,348 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjA4OEVFNzZFNjFCQUNBMTZBMwA='}]}
2025-07-03 23:53:56,349 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:53:56] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:53:56,828 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:53:56] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:53:56,962 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:53:56] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:53:57,276 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:53:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:53:57,399 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:53:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:53:57,430 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:53:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:53:57,754 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:53:57] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:54:03,829 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'Fried rice'}
2025-07-03 23:54:03,832 - handlers.base_handler - INFO - AIHandler: Handling message 'fried rice' in AI bulk order state for session 2348055614455. Original: 'Fried rice'
2025-07-03 23:54:06,585 - httpx - INFO - HTTP Request: POST https://insig-maduyfup-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-35-turbo/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
2025-07-03 23:54:07,319 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjREOThBN0JGODA3MkYxOEUxOAA="}]}
2025-07-03 23:54:07,320 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjREOThBN0JGODA3MkYxOEUxOAA='}]}
2025-07-03 23:54:07,321 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:54:07] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:54:08,146 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:54:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:54:08,294 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:54:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:54:08,516 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:54:08] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:54:10,076 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'confirm_ai_order'}
2025-07-03 23:54:10,081 - handlers.base_handler - INFO - AI order confirmed. Cart: {'Fried Rice': {'item_id': 2, 'quantity': 1, 'price': 2700.0, 'total_price': 2700.0, 'variations': {}}}. Redirecting to order handler.
2025-07-03 23:54:10,082 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'order_handler' with message 'process_final_order'.
2025-07-03 23:54:10,082 - handlers.order_handler - INFO - AI initiated order processing for session 2348055614455.
2025-07-03 23:54:10,082 - handlers.order_handler - INFO - Address set, proceeding to confirm order for AI-initiated session 2348055614455.
2025-07-03 23:54:10,974 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjA1RDAyQ0ZBQjRFQzdCQUYxNwA="}]}
2025-07-03 23:54:11,003 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEjA1RDAyQ0ZBQjRFQzdCQUYxNwA='}]}
2025-07-03 23:54:11,004 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:54:11] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:54:11,871 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:54:11] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:54:12,067 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:54:12] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:54:12,083 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:54:12] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:54:13,496 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:54:13] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:54:13,760 - handlers.webhook_handler - INFO - Processing message from 2348055614455 (User: Ziga): {'type': 'text', 'text': 'final_confirm'}
2025-07-03 23:54:15,139 - utils.data_manager - ERROR - Unexpected error while saving order ORDER_20250703_235413_a150a1c4: 'Config' object has no attribute 'MERCHANT_ID'
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 174, in save_user_order
    self.config.MERCHANT_ID or "default_merchant",
    ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Config' object has no attribute 'MERCHANT_ID'
2025-07-03 23:54:15,141 - handlers.order_handler - INFO - Order ORDER_20250703_235413_a150a1c4 saved to database for session 2348055614455
2025-07-03 23:54:15,162 - handlers.message_processor - INFO - Redirecting session 2348055614455 to handler 'payment_handler' with message 'initiate_payment'.
2025-07-03 23:54:15,162 - handlers.base_handler - INFO - Handling payment processing for session 2348055614455, message: initiate_payment
2025-07-03 23:54:15,162 - handlers.base_handler - INFO - Creating payment link for session 2348055614455
2025-07-03 23:54:16,453 - utils.data_manager - ERROR - Unexpected error while saving order ORDER-20250703235415-1690: 'Config' object has no attribute 'MERCHANT_ID'
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Lola\app\utils\data_manager.py", line 174, in save_user_order
    self.config.MERCHANT_ID or "default_merchant",
    ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Config' object has no attribute 'MERCHANT_ID'
2025-07-03 23:54:16,455 - services.payment_service - INFO - Attempting to create payment link for reference: PAY-ORDER-20250703235415-1690 with amount: 270000.0, email: victor4455@foodorder.com
2025-07-03 23:54:17,147 - services.payment_service - INFO - Payment link created for victor makinde (2348055614455), URL: https://checkout.paystack.com/scrz91dc3q5ppdt
2025-07-03 23:54:17,148 - handlers.base_handler - INFO - Starting payment monitoring for order ORDER-20250703235415-1690, reference PAY-ORDER-20250703235415-1690
2025-07-03 23:54:17,148 - services.payment_service - INFO - Attempting to verify payment for reference: PAY-ORDER-20250703235415-1690
2025-07-03 23:54:17,728 - services.payment_service - WARNING - Payment not successful for reference PAY-ORDER-20250703235415-1690. Paystack status: abandoned. Response: {'status': True, 'message': 'Verification successful', 'data': {'id': 5114536986, 'domain': 'test', 'status': 'abandoned', 'reference': 'PAY-ORDER-20250703235415-1690', 'receipt_number': None, 'amount': 270000, 'message': None, 'gateway_response': 'The transaction was not completed', 'paid_at': None, 'created_at': '2025-07-03T22:54:17.000Z', 'channel': 'card', 'currency': 'NGN', 'ip_address': '102.89.69.193, 172.69.224.73, 172.31.68.120', 'metadata': {'customer_name': 'victor makinde', 'customer_phone': '2348055614455', 'first_name': 'victor', 'last_name': 'makinde', 'order_id': 'ORDER-20250703235415-1690', 'delivery_address': 'Howson Wright'}, 'log': None, 'fees': None, 'fees_split': None, 'authorization': {}, 'customer': {'id': 289584095, 'first_name': None, 'last_name': None, 'email': 'victor4455@foodorder.com', 'customer_code': 'CUS_zv03jf9h0rpamu3', 'phone': None, 'metadata': None, 'risk_action': 'default', 'international_format_phone': None}, 'plan': None, 'split': {}, 'order_id': None, 'paidAt': None, 'createdAt': '2025-07-03T22:54:17.000Z', 'requested_amount': 270000, 'pos_transaction_data': None, 'source': None, 'fees_breakdown': None, 'connect': None, 'transaction_date': '2025-07-03T22:54:17.000Z', 'plan_object': {}, 'subaccount': {}}}
2025-07-03 23:54:17,729 - handlers.base_handler - INFO - Payment not yet verified for order ORDER-20250703235415-1690, attempt 1/15
2025-07-03 23:54:17,729 - handlers.base_handler - INFO - Payment link created successfully for order ORDER-20250703235415-1690
2025-07-03 23:54:18,467 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348055614455","wa_id":"2348055614455"}],"messages":[{"id":"wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkVBRkQxOEMxQzc1RjY0N0I4QwA="}]}
2025-07-03 23:54:18,482 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348055614455', 'wa_id': '2348055614455'}], 'messages': [{'id': 'wamid.HBgNMjM0ODA1NTYxNDQ1NRUCABEYEkVBRkQxOEMxQzc1RjY0N0I4QwA='}]}
2025-07-03 23:54:18,482 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:54:18] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:54:19,542 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:54:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:54:19,544 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:54:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:54:19,546 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:54:19] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:54:27,813 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:54:27] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:55:17,732 - services.payment_service - INFO - Attempting to verify payment for reference: PAY-ORDER-20250703235415-1690
2025-07-03 23:55:18,345 - services.payment_service - WARNING - Payment not successful for reference PAY-ORDER-20250703235415-1690. Paystack status: abandoned. Response: {'status': True, 'message': 'Verification successful', 'data': {'id': 5114536986, 'domain': 'test', 'status': 'abandoned', 'reference': 'PAY-ORDER-20250703235415-1690', 'receipt_number': None, 'amount': 270000, 'message': None, 'gateway_response': 'The transaction was not completed', 'paid_at': None, 'created_at': '2025-07-03T22:54:17.000Z', 'channel': 'card', 'currency': 'NGN', 'ip_address': '102.89.69.193, 172.69.224.73, 172.31.68.120', 'metadata': {'customer_name': 'victor makinde', 'customer_phone': '2348055614455', 'first_name': 'victor', 'last_name': 'makinde', 'order_id': 'ORDER-20250703235415-1690', 'delivery_address': 'Howson Wright'}, 'log': None, 'fees': None, 'fees_split': None, 'authorization': {}, 'customer': {'id': 289584095, 'first_name': None, 'last_name': None, 'email': 'victor4455@foodorder.com', 'customer_code': 'CUS_zv03jf9h0rpamu3', 'phone': None, 'metadata': None, 'risk_action': 'default', 'international_format_phone': None}, 'plan': None, 'split': {}, 'order_id': None, 'paidAt': None, 'createdAt': '2025-07-03T22:54:17.000Z', 'requested_amount': 270000, 'pos_transaction_data': None, 'source': None, 'fees_breakdown': None, 'connect': None, 'transaction_date': '2025-07-03T22:54:17.000Z', 'plan_object': {}, 'subaccount': {}}}
2025-07-03 23:55:18,345 - handlers.base_handler - INFO - Payment not yet verified for order ORDER-20250703235415-1690, attempt 2/15
2025-07-03 23:56:18,353 - services.payment_service - INFO - Attempting to verify payment for reference: PAY-ORDER-20250703235415-1690
2025-07-03 23:56:18,986 - services.payment_service - WARNING - Payment not successful for reference PAY-ORDER-20250703235415-1690. Paystack status: abandoned. Response: {'status': True, 'message': 'Verification successful', 'data': {'id': 5114536986, 'domain': 'test', 'status': 'abandoned', 'reference': 'PAY-ORDER-20250703235415-1690', 'receipt_number': None, 'amount': 270000, 'message': None, 'gateway_response': 'The transaction was not completed', 'paid_at': None, 'created_at': '2025-07-03T22:54:17.000Z', 'channel': 'card', 'currency': 'NGN', 'ip_address': '102.89.69.193, 172.69.224.73, 172.31.68.120', 'metadata': {'customer_name': 'victor makinde', 'customer_phone': '2348055614455', 'first_name': 'victor', 'last_name': 'makinde', 'order_id': 'ORDER-20250703235415-1690', 'delivery_address': 'Howson Wright'}, 'log': None, 'fees': None, 'fees_split': None, 'authorization': {}, 'customer': {'id': 289584095, 'first_name': None, 'last_name': None, 'email': 'victor4455@foodorder.com', 'customer_code': 'CUS_zv03jf9h0rpamu3', 'phone': None, 'metadata': None, 'risk_action': 'default', 'international_format_phone': None}, 'plan': None, 'split': {}, 'order_id': None, 'paidAt': None, 'createdAt': '2025-07-03T22:54:17.000Z', 'requested_amount': 270000, 'pos_transaction_data': None, 'source': None, 'fees_breakdown': None, 'connect': None, 'transaction_date': '2025-07-03T22:54:17.000Z', 'plan_object': {}, 'subaccount': {}}}
2025-07-03 23:56:18,988 - handlers.base_handler - INFO - Payment not yet verified for order ORDER-20250703235415-1690, attempt 3/15
2025-07-03 23:56:30,716 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:56:30] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:56:44,289 - handlers.webhook_handler - INFO - Processing message from 2348039603043 (User: Labukz): {'type': 'text', 'text': 'I plan attending'}
2025-07-03 23:56:44,290 - utils.session_manager - INFO - New session 2348039603043 initialized.
2025-07-03 23:56:44,305 - services.lead_tracker - INFO - New lead tracked: 2348039603043 (Labukz)
2025-07-03 23:56:46,182 - handlers.base_handler - INFO - Session 2348039603043: New user or missing details. Initiating onboarding.
2025-07-03 23:56:46,182 - services.whatsapp_service - INFO - Sending WhatsApp payload: {'messaging_product': 'whatsapp', 'recipient_type': 'individual', 'to': '2348039603043', 'type': 'text', 'text': {'body': 'Hello Guest, welcome to Lola!\nPlease enter your preferred name.'}}
2025-07-03 23:56:47,220 - services.whatsapp_service - INFO - WhatsApp API response: 200 - {"messaging_product":"whatsapp","contacts":[{"input":"2348039603043","wa_id":"2348039603043"}],"messages":[{"id":"wamid.HBgNMjM0ODAzOTYwMzA0MxUCABEYEkM3MDIxMDMzMjk3NjlGOEJFRAA="}]}
2025-07-03 23:56:47,221 - services.whatsapp_service - ERROR - Missing 'to' parameter in payload: {'messaging_product': 'whatsapp', 'contacts': [{'input': '2348039603043', 'wa_id': '2348039603043'}], 'messages': [{'id': 'wamid.HBgNMjM0ODAzOTYwMzA0MxUCABEYEkM3MDIxMDMzMjk3NjlGOEJFRAA='}]}
2025-07-03 23:56:47,222 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:56:47] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:56:49,788 - werkzeug - INFO - 127.0.0.1 - - [03/Jul/2025 23:56:49] "POST /webhook HTTP/1.1" 200 -
2025-07-03 23:57:02,691 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-03 23:57:04,270 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-23 21:10:41,679 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-23 21:10:44,442 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-23 21:10:47,632 - utils.data_manager - INFO - Successfully loaded 1 user details from database
2025-07-23 21:10:47,833 - services.payment_service - INFO - PaymentService initialized
2025-07-23 21:10:49,681 - handlers.product_sync_handler - ERROR - Database error while syncing products: column "product_variant_id" does not exist
LINE 3:                             product_variant_id,
                                    ^

2025-07-23 21:10:49,682 - app - WARNING - Initial product sync failed on startup
2025-07-23 21:10:49,683 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-23 21:10:52,282 - utils.data_manager - INFO - Successfully loaded 1 user details from database
2025-07-23 21:10:52,473 - services.payment_service - INFO - PaymentService initialized
2025-07-23 21:10:52,473 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-23 21:10:52,474 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-23 21:10:52,474 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-23 21:10:52,475 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-23 21:10:52,475 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-23 21:10:52,475 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-23 21:10:52,956 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-23 21:10:52,956 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-23 21:10:52,957 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-23 21:10:52,957 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-23 21:10:52,981 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-23 21:10:52,982 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-23 21:14:21,581 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-23 21:14:23,236 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-23 21:14:25,099 - utils.data_manager - INFO - Successfully loaded 1 user details from database
2025-07-23 21:14:25,318 - services.payment_service - INFO - PaymentService initialized
2025-07-23 21:14:27,482 - handlers.product_sync_handler - INFO - Successfully synced 17 products to data\products.json
2025-07-23 21:14:27,688 - app - INFO - Initial product sync successful on startup
2025-07-23 21:14:27,688 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-23 21:14:29,968 - utils.data_manager - INFO - Successfully loaded 1 user details from database
2025-07-23 21:14:30,168 - services.payment_service - INFO - PaymentService initialized
2025-07-23 21:14:30,169 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-23 21:14:30,169 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-23 21:14:30,171 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-23 21:14:30,171 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-23 21:14:30,171 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-23 21:14:30,172 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-23 21:14:30,626 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-23 21:14:30,626 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-23 21:14:30,626 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-23 21:14:30,626 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-23 21:14:30,651 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-23 21:14:30,651 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-24 22:47:02,897 - __main__ - ERROR - Environment check failed. Please fix the issues above.
2025-07-24 22:47:27,520 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-24 22:47:30,309 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-24 22:47:32,344 - utils.data_manager - INFO - Successfully loaded 1 user details from database
2025-07-24 22:47:32,554 - services.payment_service - INFO - PaymentService initialized
2025-07-24 22:47:34,405 - handlers.product_sync_handler - ERROR - Unexpected error while syncing products: float() argument must be a string or a real number, not 'NoneType'
2025-07-24 22:47:34,406 - app - WARNING - Initial product sync failed on startup
2025-07-24 22:47:34,406 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-24 22:47:36,054 - utils.data_manager - INFO - Successfully loaded 1 user details from database
2025-07-24 22:47:36,255 - services.payment_service - INFO - PaymentService initialized
2025-07-24 22:47:36,256 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-24 22:47:36,256 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-24 22:47:36,256 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-24 22:47:36,257 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-24 22:47:36,257 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-24 22:47:36,257 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-24 22:47:36,730 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-24 22:47:36,730 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-24 22:47:36,730 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-24 22:47:36,731 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-24 22:47:36,761 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-24 22:47:36,761 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-24 22:48:39,050 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-24 22:48:40,294 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-24 22:48:41,901 - utils.data_manager - INFO - Successfully loaded 1 user details from database
2025-07-24 22:48:42,094 - services.payment_service - INFO - PaymentService initialized
2025-07-24 22:48:43,700 - handlers.product_sync_handler - INFO - Successfully synced 18 products to data\products.json
2025-07-24 22:48:43,907 - app - INFO - Initial product sync successful on startup
2025-07-24 22:48:43,907 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-24 22:48:45,534 - utils.data_manager - INFO - Successfully loaded 1 user details from database
2025-07-24 22:48:45,730 - services.payment_service - INFO - PaymentService initialized
2025-07-24 22:48:45,730 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-24 22:48:45,730 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-24 22:48:45,731 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-24 22:48:45,731 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-24 22:48:45,731 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-24 22:48:45,732 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-24 22:48:46,108 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-24 22:48:46,109 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-24 22:48:46,109 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-24 22:48:46,109 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-24 22:48:46,121 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-24 22:48:46,121 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-30 21:17:02,673 - __main__ - ERROR - Environment check failed. Please fix the issues above.
2025-07-30 23:08:44,104 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-30 23:08:46,264 - __main__ - ERROR - Import error: cannot import name 'LeadTrackingHandler' from 'handlers.lead_tracking_handler' (C:\Users\zigam\Documents\Pentanative\Lola Main\handlers\lead_tracking_handler.py)
2025-07-30 23:12:44,278 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-30 23:12:45,160 - __main__ - ERROR - Import error: cannot import name 'AIService' from partially initialized module 'services.ai_service' (most likely due to a circular import) (C:\Users\zigam\Documents\Pentanative\Lola Main\services\ai_service.py)
2025-07-30 23:19:28,923 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-30 23:19:29,654 - __main__ - ERROR - Import error: cannot import name 'OrderItem' from 'utils' (C:\Users\zigam\Documents\Pentanative\Lola Main\utils\__init__.py)
2025-07-30 23:20:52,720 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-30 23:20:54,949 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-30 23:20:57,388 - utils.data_manager - INFO - Successfully loaded 11 user details from database
2025-07-30 23:20:57,584 - services.payment_service - INFO - PaymentService initialized
2025-07-30 23:20:59,146 - handlers.product_sync_handler - INFO - Successfully synced 15 products to data\products.json
2025-07-30 23:20:59,332 - app - INFO - Initial product sync successful on startup
2025-07-30 23:20:59,333 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-30 23:21:00,872 - utils.data_manager - INFO - Successfully loaded 11 user details from database
2025-07-30 23:21:01,062 - services.payment_service - INFO - PaymentService initialized
2025-07-30 23:21:01,074 - services.lead_tracker - INFO - Created lead tracking file: data/leads.json
2025-07-30 23:21:01,075 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-30 23:21:01,075 - __main__ - ERROR - Unexpected error: LeadTrackingHandler.__init__() takes 3 positional arguments but 6 were given
Traceback (most recent call last):
  File "C:\Users\zigam\Documents\Pentanative\Lola Main\run.py", line 151, in main
    from app import app
  File "C:\Users\zigam\Documents\Pentanative\Lola Main\app.py", line 55, in <module>
    webhook_handler = WebhookHandler(config)
  File "C:\Users\zigam\Documents\Pentanative\Lola Main\handlers\webhook_handler.py", line 22, in __init__
    self.message_processor = MessageProcessor(
                             ~~~~~~~~~~~~~~~~^
        config,
        ^^^^^^^
    ...<4 lines>...
        self.location_service
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\zigam\Documents\Pentanative\Lola Main\handlers\message_processor.py", line 31, in __init__
    self.lead_tracking_handler = LeadTrackingHandler(
                                 ~~~~~~~~~~~~~~~~~~~^
        config, session_manager, data_manager, whatsapp_service, self.lead_tracker
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: LeadTrackingHandler.__init__() takes 3 positional arguments but 6 were given
2025-07-30 23:21:20,203 - __main__ - INFO - Starting WhatsApp bot server...
2025-07-30 23:21:21,640 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-30 23:21:23,743 - utils.data_manager - INFO - Successfully loaded 11 user details from database
2025-07-30 23:21:23,932 - services.payment_service - INFO - PaymentService initialized
2025-07-30 23:21:25,524 - handlers.product_sync_handler - INFO - Successfully synced 15 products to data\products.json
2025-07-30 23:21:25,713 - app - INFO - Initial product sync successful on startup
2025-07-30 23:21:25,713 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-07-30 23:21:27,290 - utils.data_manager - INFO - Successfully loaded 11 user details from database
2025-07-30 23:21:27,485 - services.payment_service - INFO - PaymentService initialized
2025-07-30 23:21:27,486 - services.lead_tracker - INFO - LeadTracker initialized
2025-07-30 23:21:27,486 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-07-30 23:21:27,498 - handlers.feedback_handler - INFO - Created feedback file: data/feedback.json
2025-07-30 23:21:27,499 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-07-30 23:21:27,499 - handlers.order_handler - INFO - OrderHandler initialized.
2025-07-30 23:21:27,499 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-30 23:21:27,499 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-07-30 23:21:27,998 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-07-30 23:21:27,999 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-07-30 23:21:27,999 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-07-30 23:21:27,999 - handlers.base_handler - INFO - PaymentHandler initialized with dual verification system
2025-07-30 23:21:28,034 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-07-30 23:21:28,035 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-03 14:16:08,848 - __main__ - ERROR - Environment check failed. Please fix the issues above.
2025-08-03 14:16:29,725 - __main__ - INFO - Starting WhatsApp bot server...
2025-08-03 14:16:32,491 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-08-03 14:16:34,226 - utils.data_manager - INFO - Successfully loaded 11 user details from database
2025-08-03 14:16:34,428 - services.payment_service - INFO - PaymentService initialized
2025-08-03 14:16:35,969 - handlers.product_sync_handler - INFO - Successfully synced 15 products to data\products.json
2025-08-03 14:16:36,166 - app - INFO - Initial product sync successful on startup
2025-08-03 14:16:36,166 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-08-03 14:16:37,705 - utils.data_manager - INFO - Successfully loaded 11 user details from database
2025-08-03 14:16:37,897 - services.payment_service - INFO - PaymentService initialized
2025-08-03 14:16:37,910 - services.lead_tracker - INFO - LeadTracker initialized
2025-08-03 14:16:37,910 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-08-03 14:16:37,913 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-08-03 14:16:37,914 - handlers.order_handler - INFO - OrderHandler initialized.
2025-08-03 14:16:37,914 - handlers.base_handler - INFO - PaymentHandler initialized with subaccount ACCT_u9knhyzn5eq4iop, split percentage 95%
2025-08-03 14:16:37,914 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-08-03 14:16:38,399 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-08-03 14:16:38,400 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-08-03 14:16:38,400 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-08-03 14:16:38,400 - handlers.base_handler - INFO - PaymentHandler initialized with subaccount ACCT_u9knhyzn5eq4iop, split percentage 95%
2025-08-03 14:16:38,419 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-08-03 14:16:38,420 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-03 14:28:04,007 - __main__ - INFO - Starting WhatsApp bot server...
2025-08-03 14:28:05,885 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-08-03 14:28:07,940 - utils.data_manager - INFO - Successfully loaded 11 user details from database
2025-08-03 14:28:08,158 - services.payment_service - INFO - PaymentService initialized
2025-08-03 14:28:09,869 - handlers.product_sync_handler - INFO - Successfully synced 15 products to data\products.json
2025-08-03 14:28:10,065 - app - INFO - Initial product sync successful on startup
2025-08-03 14:28:10,065 - utils.session_manager - INFO - SessionManager initialized. Default timeouts: Unpaid=600s, Paid=6000s
2025-08-03 14:28:11,693 - utils.data_manager - INFO - Successfully loaded 11 user details from database
2025-08-03 14:28:11,885 - services.payment_service - INFO - PaymentService initialized
2025-08-03 14:28:11,885 - services.lead_tracker - INFO - LeadTracker initialized
2025-08-03 14:28:11,886 - handlers.lead_tracking_handler - INFO - LeadTrackingHandler initialized.
2025-08-03 14:28:11,888 - handlers.feedback_handler - INFO - FeedbackHandler initialized.
2025-08-03 14:28:11,888 - handlers.order_handler - INFO - OrderHandler initialized.
2025-08-03 14:28:11,888 - handlers.base_handler - INFO - PaymentHandler initialized with subaccount ACCT_u9knhyzn5eq4iop, split percentage 95%
2025-08-03 14:28:11,889 - handlers.location_address_handler - INFO - LocationAddressHandler initialized.
2025-08-03 14:28:12,708 - services.ai_service - INFO - Azure OpenAI client initialized successfully in AIService.
2025-08-03 14:28:12,709 - handlers.ai_handler - INFO - AIHandler: AIService successfully initialized.
2025-08-03 14:28:12,710 - handlers.message_processor - INFO - MessageProcessor initialized with lead tracking, AI support, and feedback collection.
2025-08-03 14:28:12,711 - handlers.base_handler - INFO - PaymentHandler initialized with subaccount ACCT_u9knhyzn5eq4iop, split percentage 95%
2025-08-03 14:28:12,731 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-08-03 14:28:12,732 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
